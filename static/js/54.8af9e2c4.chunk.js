(this["webpackJsonpsafe-react"]=this["webpackJsonpsafe-react"]||[]).push([[54],{1366:function(e,t,n){"use strict";var a,r,c=n(27),i=n(0),o=n.n(i),l=n(25),s=n(21),u=l.default.div(a||(a=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  margin: 8px 0;\n\n  svg {\n    margin: 0 12px 0 4px;\n  }\n"]))),d=Object(l.default)(s.Divider)(r||(r=Object(c.a)(["\n  width: 100%;\n"])));t.a=function(e){var t=e.withArrow;return o.a.createElement(u,null,t&&o.a.createElement(s.Icon,{type:"arrowDown",size:"md"}),o.a.createElement(d,null))}},3041:function(e,t,n){"use strict";n.r(t);var a,r,c,i,o,l,s,u,d,p,m,f,b,h,v,x,g,O,j=n(0),E=n.n(j),w=n(59),y=n(2),T=n.n(y),k=n(5),C=n(33),S=n(27),A=n(25),I=n(21),L=n(38),z=n(1960),R=n(50),D=n(483),N=n(291),M=n(20),F=n(55),U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["https:","http:"];try{var n=new URL(e);return t.includes(n.protocol)}catch(a){return!1}},B=n(165),G=n(10),P=n(86),_=n(68),H=n(492),q=n(336),V=function(){var e=Object(j.useState)([]),t=Object(C.a)(e,2),n=t[0],a=t[1],r=Object(j.useState)([]),c=Object(C.a)(r,2),i=c[0],o=c[1];Object(j.useEffect)((function(){var e=function(){var e=Object(k.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.d)();case 2:t=e.sent,o(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();i.length||e()}),[i]),Object(j.useEffect)((function(){var e=function(e){a((function(t){var n=Object(P.a)(t),a=n.findIndex((function(t){return t.url===e.url})),r=e.error?q.a.ERROR:q.a.SUCCESS;return n[a]=Object(G.a)(Object(G.a)({},e),{},{fetchStatus:r}),n.sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))}))};(function(){var t=Object(k.a)(T.a.mark((function t(){var n,r,c;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(_.a)(H.a);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:n=t.t0,r=n.filter((function(e){return!i.some((function(t){return t.url===e.url}))})),c=[].concat(Object(P.a)(i),Object(P.a)(r)).filter((function(e){return!e.networks||e.networks.includes(Object(M.h)())})).map((function(e){return Object(G.a)(Object(G.a)(Object(G.a)({},Object(H.e)()),e),{},{url:e.url.trim()})})),a(c),c.forEach((function(t){t.name&&"unknown"!==t.name?e(t):Object(H.c)(t.url).then(e)}));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[i]);var l=Object(j.useCallback)((function(e){a((function(t){var n=t.filter((function(t){return t.url!==e})),a=n.map((function(e){return{url:e.url,disabled:e.disabled}}));return Object(_.c)(H.a,a),n}))}),[]);return{appList:n,staticAppsList:i,removeApp:l}},W=n(297),K=n(39),J=n(30),Y=n(290),X=n(470),Z=A.default.div(a||(a=Object(S.a)(["\n  display: flex;\n  align-items: center;\n\n  span {\n    margin-right: 4px;\n  }\n"]))),$=A.default.div(r||(r=Object(S.a)(["\n  margin-top: 15px;\n"]))),Q=function(e){var t=e.onTxReject,n=e.onClose;return E.a.createElement(E.a.Fragment,null,E.a.createElement(Z,null,E.a.createElement(I.Icon,{color:"error",size:"md",type:"info"}),E.a.createElement(I.Title,{size:"xs"},"Transaction error")),E.a.createElement(I.Text,{size:"lg"},"This Safe App initiated a transaction which cannot be processed. Please get in touch with the developer of this Safe App for more information."),E.a.createElement($,null,E.a.createElement(I.ModalFooterConfirmation,{cancelText:"Cancel",handleCancel:function(){return t(),void n()},handleOk:function(){},okDisabled:!0,okText:"Submit"})))},ee=n(280),te=n(471),ne=n.n(te),ae=n(62),re=n(4),ce=n(76),ie=Object(A.default)(ae.a)(c||(c=Object(S.a)(["\n  && {\n    font-size: ",";\n    white-space: nowrap;\n    max-width: 370px;\n    overflow: hidden;\n  }\n"])),re.lg),oe=A.default.img(i||(i=Object(S.a)(["\n  width: 20px;\n  margin-right: 10px;\n"]))),le=A.default.div(o||(o=Object(S.a)(["\n  display: flex;\n  align-items: center;\n"]))),se=Object(A.default)(ce.a)(l||(l=Object(S.a)(["\n  padding: "," ",";\n  justify-content: space-between;\n  box-sizing: border-box;\n  max-height: 75px;\n"])),re.md,re.lg),ue=Object(A.default)(ne.a)(s||(s=Object(S.a)(["\n  height: 35px;\n  width: 35px;\n"]))),de=A.default.div(u||(u=Object(S.a)(["\n  margin-right: 15px;\n"]))),pe=function(e){var t=e.goBack,n=e.iconUrl,a=e.title,r=e.onClose;return E.a.createElement(se,{align:"center",grow:!0},E.a.createElement(le,null,t&&E.a.createElement(de,null,E.a.createElement(ee.a,{onClick:t},E.a.createElement(I.Icon,{type:"arrowLeft",size:"md"}))),n&&E.a.createElement(oe,{alt:a,src:n}),E.a.createElement(ie,{noMargin:!0,weight:"bolder",title:a},a)),E.a.createElement(ee.a,{disableRipple:!0,onClick:r},E.a.createElement(ue,null)))},me=n(473),fe=n(65),be=n(48),he=[{type:"function",name:"multiSend",constant:!1,payable:!1,stateMutability:"nonpayable",inputs:[{type:"bytes",name:"transactions"}],outputs:[]}],ve=n(1350),xe=n(1364),ge=n(1363),Oe=n(1359),je=n(1368),Ee=n(277),we=n.n(Ee),ye=A.default.div(d||(d=Object(S.a)(["\n  display: flex;\n  align-items: center;\n\n  > :nth-child(2) {\n    margin-left: ","px;\n  }\n"])),(function(e){return e.margin})),Te=A.default.div(p||(p=Object(S.a)(["\n  margin-bottom: 15px;\n\n  > :nth-child(2) {\n    margin-bottom: 15px;\n  }\n"]))),ke=A.default.div(m||(m=Object(S.a)(["\n  width: 100%;\n  max-height: 260px;\n  overflow-y: auto;\n  border-top: 2px solid ",";\n"])),(function(e){return e.theme.colors.separator})),Ce=A.default.div(f||(f=Object(S.a)(["\n  display: flex;\n  justify-content: space-between;\n\n  padding: 0 24px;\n  height: 50px;\n  border-bottom: 2px solid ",";\n\n  :hover {\n    cursor: pointer;\n  }\n"])),(function(e){return e.theme.colors.separator})),Se=A.default.div(b||(b=Object(S.a)(["\n  margin-bottom: 15px;\n"]))),Ae=function(e){var t=e.txRecipient,n=e.txData,a=e.txValue,r=Object(M.i)().nativeCoin;return E.a.createElement(Te,null,E.a.createElement(E.a.Fragment,null,E.a.createElement(I.Text,{size:"lg",strong:!0},"Send ".concat(a," ").concat(r.symbol," to:")),E.a.createElement(I.EthHashInfo,{hash:t,showAvatar:!0,textSize:"lg",showCopyBtn:!0,explorerUrl:Object(M.c)(t)})),E.a.createElement(E.a.Fragment,null,E.a.createElement(I.Text,{size:"lg",strong:!0},"Data (hex encoded):"),E.a.createElement(ye,{margin:5},E.a.createElement(I.Text,{size:"lg"},n?J.i.utils.hexToBytes(n).length:0," bytes"),E.a.createElement(I.CopyToClipboardBtn,{textToCopy:n}))))},Ie=function(e,t){var n;if("address"===e.type&&(n=E.a.createElement(I.EthHashInfo,{hash:e.value,showAvatar:!0,textSize:"lg",showCopyBtn:!0,explorerUrl:Object(M.c)(e.value)})),e.type.startsWith("bytes")&&(n=E.a.createElement(ye,{margin:5},E.a.createElement(I.Text,{size:"lg"},J.i.utils.hexToBytes(e.value).length," bytes"),E.a.createElement(I.CopyToClipboardBtn,{textToCopy:e.value}))),!n){var a=e.value;if(e.type.endsWith("[]"))try{a=JSON.stringify(e.value)}catch(r){}n=E.a.createElement(I.Text,{size:"lg"},a)}return E.a.createElement(Se,{key:t},E.a.createElement(I.Text,{size:"lg",strong:!0},e.name," (",e.type,")"),n)},Le=function(e){var t=e.decodedData,n=e.onTxItemClick;return t?E.a.createElement(ke,null,E.a.createElement(Ce,{onClick:function(){return n(t)}},E.a.createElement(I.IconText,{iconSize:"sm",iconType:"code",text:"Contract interaction",textSize:"xl"}),E.a.createElement(ye,{margin:20},E.a.createElement(I.Text,{size:"xl"},t.method),E.a.createElement(I.FixedIcon,{type:"chevronRight"})))):null},ze=function(e){var t=e.decodedData,n=e.onTxItemClick,a=we()(t,"parameters[0].valueDecoded");return a?E.a.createElement(ke,null,a.map((function(e,t){return E.a.createElement(Ce,{key:t,onClick:function(){return n(e)}},E.a.createElement(I.IconText,{iconSize:"sm",iconType:"code",text:"Contract interaction",textSize:"xl"}),E.a.createElement(ye,{margin:20},e.dataDecoded&&E.a.createElement(I.Text,{size:"xl"},e.dataDecoded.method),E.a.createElement(I.FixedIcon,{type:"chevronRight"})))}))):null},Re=function(e){var t=e.txs,n=e.decodedData,a=e.onTxItemClick;return t.length>1?E.a.createElement(ze,{decodedData:n,onTxItemClick:a}):E.a.createElement(Le,{decodedData:n,onTxItemClick:a})},De=n(53),Ne=n.n(De),Me=function(){var e=Object(k.a)(T.a.mark((function e(t){var n,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===t||void 0===t?void 0:t.length)&&"0x"!==t){e.next=2;break}return e.abrupt("return",null);case 2:return n="".concat(Object(M.p)(),"/data-decoder/"),e.prev=3,e.next=6,Ne.a.post(n,{data:t});case 6:return a=e.sent,e.abrupt("return",a.data);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),Fe=n(253),Ue=n(107),Be=n(1366),Ge=n(115),Pe=Object(M.i)().nativeCoin,_e=A.default.div(h||(h=Object(S.a)(["\n  max-width: 480px;\n  padding: "," "," 0;\n"])),re.md,re.lg),He=A.default.div(v||(v=Object(S.a)(["\n  background-color: ",";\n  padding: "," ",";\n"])),(function(e){return e.theme.colors.background}),re.sm,re.lg),qe=A.default.div(x||(x=Object(S.a)(["\n  margin: 24px -24px;\n"]))),Ve=Object(A.default)(Ue.a)(g||(g=Object(S.a)(["\n  background-color: ",";\n  width: fit-content;\n  padding: 5px 10px;\n  border-radius: 3px;\n  margin: 4px 0 0 40px;\n\n  display: flex;\n\n  > :nth-child(1) {\n    margin-right: 5px;\n  }\n"])),(function(e){return e.theme.colors.separator})),We=function(e){var t=e.app,n=e.txs,a=e.safeAddress,r=e.ethBalance,c=e.safeName,i=e.params,o=e.hidden,l=e.onUserConfirm,s=e.onClose,u=e.onTxReject,d=e.areTxsMalformed,p=e.showDecodedTxData,m=n.length>1,f=Object(j.useState)(null),b=Object(C.a)(f,2),h=b[0],v=b[1],x=Object(L.e)(),g=Object(M.c)(a),O=Object(j.useMemo)((function(){var e;return m?fe.b:null===(e=n[0])||void 0===e?void 0:e.to}),[n,m]),w=Object(j.useMemo)((function(){var e;return m?function(e){var t=Object(J.f)(),n=new t.eth.Contract(he,fe.b),a=e.map((function(e){return[t.eth.abi.encodeParameter("uint8",0).slice(-2),t.eth.abi.encodeParameter("address",e.to).slice(-40),t.eth.abi.encodeParameter("uint256",e.value).slice(-64),t.eth.abi.encodeParameter("uint256",t.utils.hexToBytes(e.data).length).slice(-64),e.data.replace(/^0x/,"")].join("")})).join("");return n.methods.multiSend("0x".concat(a)).encodeABI()}(n):null===(e=n[0])||void 0===e?void 0:e.data}),[n,m]),y=Object(j.useMemo)((function(){var e,t,a;return m?"0":(null===(e=n[0])||void 0===e?void 0:e.value)&&(a=null===(t=n[0])||void 0===t?void 0:t.value,J.i.utils.toBN(a).toString())}),[n,m]),S=Object(j.useMemo)((function(){return m?be.b:be.a}),[m]),A=Object(j.useState)(0),z=Object(C.a)(A,2),R=z[0],D=z[1],N=Object(j.useState)(),F=Object(C.a)(N,2),U=F[0],B=F[1],G=Object(j.useState)(),P=Object(C.a)(G,2),_=P[0],H=P[1],q=Object(ve.b)({txData:w||"",txRecipient:O,operation:S,txAmount:y,safeTxGas:R,manualGasPrice:U,manualGasLimit:_}),V=q.gasLimit,W=q.gasPriceFormatted,K=q.gasEstimation,X=q.isOffChainSignature,Z=q.isCreation,$=q.isExecution,Q=q.gasCostFormatted,ee=q.txEstimationExecutionStatus,te=Object(je.a)(ee),ne=Object(C.a)(te,2),ae=ne[0],re=ne[1];Object(j.useEffect)((function(){(function(){var e=Object(k.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me(w);case 2:t=e.sent,v(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[w]);var ce=function(){u(),s()},ie=function(e){l(e),s()},oe=function(){var e=Object(k.a)(T.a.mark((function e(n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re(Y.a.LOADING),e.next=3,x(Object(me.b)({safeAddress:a,to:O,valueInWei:y,txData:w,operation:S,origin:t.id,navigateToTransactionsTab:!1,txNonce:n.safeNonce,safeTxGas:n.safeTxGas?Number(n.safeTxGas):void 0,ethParameters:n,notifiedTransaction:be.c.STANDARD_TX},ie,ce));case 3:re(Y.a.READY);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return E.a.createElement(ge.a,{ethGasLimit:V,ethGasPrice:W,safeTxGas:Math.max(K,(null===i||void 0===i?void 0:i.safeTxGas)||0).toString(),closeEditModalCallback:function(e){var t=Number(W),n=Number(e.ethGasPrice),a=Number(K),r=Number(e.safeTxGas);n&&t!==n&&B(e.ethGasPrice),e.ethGasLimit&&V!==e.ethGasLimit&&H(e.ethGasLimit),r&&a!==r&&D(r)},isOffChainSignature:X,isExecution:$},(function(e,i){return E.a.createElement("div",{hidden:o},E.a.createElement(pe,{title:t.name,iconUrl:t.iconUrl,onClose:ce}),E.a.createElement(Ge.a,null),E.a.createElement(_e,null,E.a.createElement(I.EthHashInfo,{name:c,hash:a,showAvatar:!0,showCopyBtn:!0,explorerUrl:g}),E.a.createElement(Ve,null,E.a.createElement(I.Text,{size:"md"},"Balance:"),E.a.createElement(I.Text,{size:"md",strong:!0},"".concat(r," ").concat(Pe.symbol))),E.a.createElement(Be.a,{withArrow:!0}),E.a.createElement(Ae,{txRecipient:O,txData:w,txValue:Object(Fe.a)(y,Pe.decimals)}),E.a.createElement(qe,null,E.a.createElement(Re,{txs:n,decodedData:h,onTxItemClick:p})),!m&&E.a.createElement(Be.a,null),E.a.createElement(Oe.a,{txParameters:e,onEdit:i,isTransactionCreation:Z,isTransactionExecution:$,isOffChainSignature:X})),ee===ve.a.LOADING?null:E.a.createElement(He,null,E.a.createElement(xe.a,{gasCostFormatted:Q,isExecution:$,isCreation:Z,isOffChainSignature:X,txEstimationExecutionStatus:ee})),E.a.createElement(Y.b.Footer,{withoutBorder:ee!==ve.a.LOADING},E.a.createElement(Y.b.Footer.Buttons,{cancelButtonProps:{onClick:ce},confirmButtonProps:{onClick:function(){return oe(e)},disabled:d,status:ae,text:ee===ve.a.LOADING?"Estimating":void 0}})))}))},Ke=Object(M.i)().nativeCoin,Je=A.default.div(O||(O=Object(S.a)(["\n  max-width: 480px;\n  padding: "," ",";\n  word-break: break-word;\n"])),re.md,re.lg);var Ye,Xe,Ze,$e,Qe,et,tt,nt,at,rt,ct,it,ot,lt=function(e){var t,n,a=e.hideDecodedTxData,r=e.onClose,c=e.decodedTxData;if(void 0!==c.operation){var i,o=Object(Fe.a)(c.value,Ke.decimals);n=E.a.createElement(E.a.Fragment,null,E.a.createElement(Ae,{txRecipient:c.to,txData:c.data,txValue:o}),null===(i=c.dataDecoded)||void 0===i?void 0:i.parameters.map((function(e,t){return Ie(e,t)})))}else n=E.a.createElement(E.a.Fragment,null,c.parameters.map((function(e,t){return Ie(e,t)})));return E.a.createElement(E.a.Fragment,null,E.a.createElement(pe,{title:(null===(t=c.dataDecoded)||void 0===t?void 0:t.method)||c.method,onClose:r,goBack:a}),E.a.createElement(Ge.a,null),E.a.createElement(Je,null,n))},st=function(e){var t=Object(j.useState)(),n=Object(C.a)(t,2),a=n[0],r=n[1],c=e.txs.some((function(e){return!function(e){return!!["string","number"].includes(typeof e.value)&&!("string"===typeof e.value&&!/^(0x)?[0-9a-f]+$/i.test(e.value))&&void 0===Object(X.j)(e.to)&&!!e.data&&"string"===typeof e.data}(e)})),i=r,o=function(){return r(void 0)};return E.a.createElement(Y.c,{description:"Safe App transaction",title:"Safe App transaction",open:e.isOpen},c&&E.a.createElement(Q,e),a&&E.a.createElement(lt,{onClose:function(){o(),e.onClose()},hideDecodedTxData:o,decodedTxData:a}),E.a.createElement(We,Object.assign({},e,{areTxsMalformed:c,showDecodedTxData:i,hidden:c||!!a})))},ut=n(332),dt=Object(M.j)(),pt="APPS_LEGAL_CONSENT_RECEIVED",mt=function(e){var t=e.onCancel,n=e.onConfirm;return E.a.createElement(I.FixedDialog,{body:E.a.createElement(E.a.Fragment,null,E.a.createElement(I.Text,{size:"md"},"You are now accessing third-party apps, which we do not own, control, maintain or audit. We are not liable for any loss you may suffer in connection with interacting with the apps, which is at your own risk. You must read our Terms, which contain more detailed provisions binding on you relating to the apps."),E.a.createElement("br",null),E.a.createElement(I.Text,{size:"md"},"I have read and understood the"," ",E.a.createElement("a",{href:"https://gnosis-safe.io/terms",rel:"noopener noreferrer",target:"_blank"},"Terms")," ","and this Disclaimer, and agree to be bound by them.")),onCancel:t,onConfirm:n,title:"Disclaimer"})},ft=n(6),bt=n(3025),ht=n(150),vt=function e(t,n){var a=this;Object(ft.a)(this,e),this.iframeRef=void 0,this.handlers=new Map,this.app=void 0,this.on=function(e,t){a.handlers.set(e,t)},this.isValidMessage=function(e){var t=e.source.parent===window.parent,n=Object.values(bt.METHODS).includes(e.data.method);return t&&n},this.canHandleMessage=function(e){return Boolean(a.handlers.get(e.data.method))},this.send=function(e,t){var n,r,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(bt.getSDKVersion)(),o=c?bt.MessageFormatter.makeErrorResponse(t,e,i):bt.MessageFormatter.makeResponse(t,e,i);null===(n=a.iframeRef.current)||void 0===n||null===(r=n.contentWindow)||void 0===r||r.postMessage(o,"*")},this.handleIncomingMessage=function(){var e=Object(k.a)(T.a.mark((function e(t){var n,r,c,i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.isValidMessage(t),r=a.canHandleMessage(t),!n||!r){e.next=15;break}return c=a.handlers.get(t.data.method),e.prev=4,e.next=7,c(t);case 7:"undefined"!==typeof(i=e.sent)&&a.send(i,t.data.id),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),a.send(e.t0.message,t.data.id,!0),Object(ht.c)(ht.a._901,e.t0.message,{contexts:{safeApp:a.app,request:t.data}});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),this.clear=function(){window.removeEventListener("message",a.handleIncomingMessage)},this.iframeRef=t,this.app=n,window.addEventListener("message",this.handleIncomingMessage)},xt=n(668),gt=n(660),Ot=A.default.div(Ye||(Ye=Object(S.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  height: 476px;\n"]))),jt=A.default.div(Xe||(Xe=Object(S.a)(["\n  display: flex;\n  flex-direction: column;\n  height: calc(100% + 59px);\n  margin: 0 -16px;\n"]))),Et=Object(A.default)(I.Card)(Ze||(Ze=Object(S.a)(["\n  flex-grow: 1;\n  padding: 0;\n  border-radius: 0;\n"]))),wt=A.default.iframe($e||($e=Object(S.a)(["\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n  box-sizing: border-box;\n  display: ",";\n"])),(function(e){return e.isLoading?"none":"block"})),yt=Object(M.j)(),Tt=Object(M.h)(),kt={isOpen:!1,txs:[],requestId:"",params:void 0},Ct=function(e){var t=e.appUrl,n=Object(L.f)(N.b),a=Object(L.f)(R.n),r=Object(L.f)(R.f),c=Object(D.a)(a),i=Object(B.d)().trackEvent,o=Object(w.g)(),l=function(){var e=Object(j.useState)(),t=Object(C.a)(e,2),n=t[0],a=t[1];return Object(j.useEffect)((function(){!function(){var e=Object(k.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)(pt);case 2:t=e.sent,a(!!t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),{consentReceived:n,onConsentReceipt:Object(j.useCallback)((function(){a(!0),Object(_.c)(pt,!0)}),[])}}(),s=l.consentReceived,u=l.onConsentReceipt,d=V().staticAppsList,p=Object(j.useRef)(null),m=Object(j.useState)(kt),f=Object(C.a)(m,2),b=f[0],h=f[1],v=Object(j.useState)(!0),x=Object(C.a)(v,2),g=x[0],O=x[1],y=Object(j.useState)(),S=Object(C.a)(y,2),A=S[0],U=S[1],P=Object(j.useRef)(),q=Object(j.useState)(!1),Y=Object(C.a)(q,2),X=Y[0],Z=Y[1];Object(j.useEffect)((function(){return g?P.current=window.setTimeout((function(){Z(!0)}),K.r):(clearTimeout(P.current),Z(!1)),function(){clearTimeout(P.current)}}),[g]);var $=Object(j.useCallback)((function(e,t,n){return h({isOpen:!0,txs:e,requestId:n,params:t})}),[h]),Q=Object(j.useCallback)((function(){return h(kt)}),[h]),ee=function(e,t,n,a){var r=Object(ut.useSnackbar)(),c=r.enqueueSnackbar,i=r.closeSnackbar,o=Object(L.f)(R.n),l=Object(D.a)(o),s=Object(L.f)(R.f),u=Object(L.e)(),d=Object(j.useCallback)((function(t,n){var r,c,i=Object(G.a)(Object(G.a)({},t),{},{requestId:n||Math.trunc(window.performance.now()),version:"0.4.2"});a&&e&&(null===(r=a.current)||void 0===r||null===(c=r.contentWindow)||void 0===c||c.postMessage(i,e.url))}),[a,e]);return Object(j.useEffect)((function(){var n=function(e,n,a){if(e)switch(e){case z.SDK_MESSAGES.SEND_TRANSACTIONS:n&&t(n,void 0,a);break;case z.SDK_MESSAGES.SAFE_APP_SDK_INITIALIZED:var r={messageId:z.INTERFACE_MESSAGES.ON_SAFE_INFO,data:{safeAddress:o,network:dt.toLowerCase(),ethBalance:s}},c={messageId:z.INTERFACE_MESSAGES.ENV_INFO,data:{txServiceUrl:Object(M.p)()}};d(r),d(c);break;default:console.error("ThirdPartyApp: A message was received with an unknown message id ".concat(e,"."))}},a=function(){var t=Object(k.a)(T.a.mark((function t(a){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.origin!==window.origin){t.next=2;break}return t.abrupt("return");case 2:if(null===e||void 0===e?void 0:e.url.includes(a.origin)){t.next=5;break}return console.error("ThirdPartyApp: A message was received from an unknown origin ".concat(a.origin)),t.abrupt("return");case 5:n(a.data.messageId,a.data.data,a.data.requestId);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return window.addEventListener("message",a),function(){window.removeEventListener("message",a)}}),[n,i,u,c,s,t,o,l,e,d]),{sendMessageToIframe:d}}(A,$,Q,p).sendMessageToIframe,te=Object(j.useCallback)((function(){var e=p.current;e&&function(e,t){try{var n=new URL(e),a=new URL(t);return n.href===a.href}catch(r){return!1}}(e.src,t)&&(O(!1),ee({messageId:z.INTERFACE_MESSAGES.ON_SAFE_INFO,data:{safeAddress:a,network:yt.toLowerCase(),ethBalance:r}}))}),[r,a,t,ee]),ne=function(e,t){var n=Object(j.useState)(void 0),a=Object(C.a)(n,2),r=a[0],c=a[1];return Object(j.useEffect)((function(){var n;return t&&function(e,t){n=new vt(e,t),c(n)}(e,t),function(){var e;null===(e=n)||void 0===e||e.clear()}}),[t,e]),r}(p,A);Object(j.useEffect)((function(){null===ne||void 0===ne||ne.on("getEnvInfo",(function(){return{txServiceUrl:Object(M.p)()}})),null===ne||void 0===ne||ne.on("getTxBySafeTxHash",function(){var e=Object(k.a)(T.a.mark((function e(t){var n,a,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,a=n.safeTxHash,e.next=3,Object(gt.a)(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===ne||void 0===ne||ne.on("getSafeInfo",(function(){return{safeAddress:a,network:yt,chainId:Tt}})),null===ne||void 0===ne||ne.on("getSafeBalances",function(){var e=Object(k.a)(T.a.mark((function e(t){var n,r,c,i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,r=n.currency,c=void 0===r?"usd":r,e.next=3,Object(xt.a)({safeAddress:a,selectedCurrency:c});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===ne||void 0===ne||ne.on("rpcCall",function(){var e=Object(k.a)(T.a.mark((function e(t){var n,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,e.prev=1,a=new Promise((function(e,t){var a,r;null!==J.i.currentProvider&&"string"!==typeof J.i.currentProvider&&"send"in J.i.currentProvider&&(null===(a=J.i.currentProvider)||void 0===a||null===(r=a.send)||void 0===r||r.call(a,{jsonrpc:"2.0",method:n.call,params:n.params,id:"1"},(function(n,a){(n||(null===a||void 0===a?void 0:a.error))&&t(n||(null===a||void 0===a?void 0:a.error)),e(null===a||void 0===a?void 0:a.result)})))})),e.abrupt("return",a);case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),null===ne||void 0===ne||ne.on("sendTransactions",(function(e){$(e.data.params.txs,e.data.params.params,e.data.id)}))}),[ne,$,a]);if(Object(j.useEffect)((function(){var e=function(){var e=Object(k.a)(T.a.mark((function e(){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.c)(t);case 2:n=e.sent,U(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();d.length&&e()}),[t,d]),Object(j.useEffect)((function(){A&&i({category:B.a,action:"Apps",label:A.name})}),[A,i]),!t)throw Error("App url No provided or it is invalid.");return A?!1===s?E.a.createElement(mt,{onCancel:function(){return o.push("".concat(F.c,"/").concat(a,"/balances"))},onConfirm:u}):"UNKNOWN"!==yt&&n?E.a.createElement(jt,null,E.a.createElement(Et,null,g&&E.a.createElement(W.a,{style:{flexDirection:"column"}},X&&E.a.createElement(I.Title,{size:"xs"},"The safe app is taking longer than usual to load. There might be a problem with the app provider."),E.a.createElement(I.Loader,{size:"md"})),E.a.createElement(wt,{isLoading:g,frameBorder:"0",id:"iframe-".concat(t),ref:p,src:t,title:A.name,onLoad:te})),E.a.createElement(st,{isOpen:b.isOpen,app:A,safeAddress:a,ethBalance:r,safeName:c,txs:b.txs,onClose:Q,onUserConfirm:function(e){ee({messageId:z.INTERFACE_MESSAGES.TRANSACTION_CONFIRMED,data:{safeTxHash:e}},b.requestId),null===ne||void 0===ne||ne.send({safeTxHash:e},b.requestId)},params:b.params,onTxReject:function(){ee({messageId:z.INTERFACE_MESSAGES.TRANSACTION_REJECTED,data:{}},b.requestId),null===ne||void 0===ne||ne.send("Transaction was rejected",b.requestId,!0)}})):E.a.createElement(Ot,null,E.a.createElement(I.FixedIcon,{type:"notOwner"}),E.a.createElement(I.Title,{size:"xs"},"To use apps, you must be an owner of this Safe")):E.a.createElement(W.a,null,E.a.createElement(I.Loader,{size:"md"}))},St=n(232),At=n(658),It=Object(A.keyframes)(Qe||(Qe=Object(S.a)(["\n  0% {\n    background-position: 0% 54%;\n  }\n  50% {\n    background-position: 100% 47%;\n  }\n  100% {\n    background-position: 0% 54%;\n  }\n"]))),Lt=A.default.div(et||(et=Object(S.a)(["\n  height: 60px;\n  width: 60px;\n  border-radius: 30px;\n  margin: 0 auto;\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),It),zt=A.default.div(tt||(tt=Object(S.a)(["\n  height: 24px;\n  width: 160px;\n  margin: 24px auto;\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),It),Rt=A.default.div(nt||(nt=Object(S.a)(["\n  height: 16px;\n  width: 200px;\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),It),Dt=Object(A.default)(I.Card)(at||(at=Object(S.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: space-evenly;\n  box-shadow: 1px 2px 10px 0 ",";\n  height: 232px !important;\n  box-sizing: border-box;\n  cursor: pointer;\n  color: ",";\n\n  :hover {\n    box-shadow: 1px 2px 16px 0 ",";\n    transition: box-shadow 0.3s ease-in-out;\n    background-color: ",";\n    cursor: pointer;\n\n    h5 {\n      color: ",";\n    }\n  }\n"])),(function(e){var t=e.theme;return Object(St.fade)(t.colors.shadow.color,.18)}),(function(e){return e.theme.colors.secondary}),(function(e){var t=e.theme;return Object(St.fade)(t.colors.shadow.color,.35)}),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.primary})),Nt=A.default.img(rt||(rt=Object(S.a)(["\n  width: ",";\n  height: ",";\n  margin-top: ",";\n  object-fit: contain;\n"])),(function(e){return"md"===e.size?"60px":"102px"}),(function(e){return"md"===e.size?"60px":"92px"}),(function(e){return"md"===e.size?"0":"-16px"})),Mt=Object(A.default)(I.Title)(ct||(ct=Object(S.a)(["\n  text-align: center;\n  margin: 16px 0 9px 0;\n"]))),Ft=Object(A.default)(I.Text)(it||(it=Object(S.a)(["\n  height: 71px;\n  text-align: center;\n"]))),Ut=function(e){e.currentTarget.onerror=null,e.currentTarget.src=At.a};!function(e){e[e.Button=0]="Button",e[e.Content=1]="Content"}(ot||(ot={}));var Bt,Gt,Pt,_t,Ht,qt,Vt,Wt,Kt,Jt,Yt,Xt,Zt,$t,Qt,en,tn=function(e){var t=e.isLoading,n=void 0!==t&&t,a=e.className,r=e.name,c=e.description,i=e.iconUrl,o=e.iconSize,l=void 0===o?"md":o,s=e.buttonText,u=e.onClick,d=void 0===u?function(){}:u;return n?E.a.createElement(Dt,{className:a},E.a.createElement(Lt,null),E.a.createElement(zt,null),E.a.createElement(Rt,null),E.a.createElement(Rt,null)):E.a.createElement(Dt,{className:a,onClick:d},E.a.createElement(Nt,{alt:"".concat(r||"App"," Logo"),src:i,onError:Ut,size:l}),r&&E.a.createElement(Mt,{size:"xs"},r),c&&E.a.createElement(Ft,{size:"lg"},c," "),s&&E.a.createElement(I.Button,{size:"md",color:"primary",variant:"contained",onClick:d},s))},nn=n.p+"static/media/addApp.4a0829b7.svg",an=n(140),rn=n(1342),cn=n(93),on=n(1336),ln=n(1337),sn=Object(A.default)(I.Checkbox)(Bt||(Bt=Object(S.a)(["\n  margin: 0;\n"]))),un=function(){var e=Object(on.e)({subscription:{visited:!0}}).visited,t=(null===e||void 0===e?void 0:e.agreementAccepted)?X.p:void 0;return E.a.createElement(ln.a,{component:sn,label:E.a.createElement(I.Text,{size:"xl"},"This app is not a Gnosis product and I agree to use this app at my own risk."),name:"agreementAccepted",type:"checkbox",validate:t})},dn=n(1430),pn=n(31),mn=n(3034),fn=n.n(mn),bn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return Object(j.useCallback)(fn()(e,t,n),[e,t,n])},hn=function(e){return U(e)?void 0:"Invalid URL"},vn=Object(dn.a)({field:"appUrl",updates:{appUrl:function(){var e=Object(k.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!U(t)&&Object(pn.e)(t),!e.t0){e.next=5;break}return e.next=4,Object(H.f)(t);case 4:e.t0=e.sent;case 5:if(!(n=e.t0)){e.next=8;break}return e.abrupt("return",n);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),xn=function(e){var t=e.onAppInfo,n=e.onLoading,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,a=Object(j.useRef)(e),r=Object(j.useState)(e),c=Object(C.a)(r,2),i=c[0],o=c[1],l=bn((function(e){return o(e)}),t,n);return Object(j.useEffect)((function(){if(e!==a.current)return l(e),a.current=e,l.cancel}),[l,e]),i}(Object(on.c)("appUrl",{subscription:{value:!0}}).input.value,500);return E.a.useEffect((function(){var e=function(){var e=Object(k.a)(T.a.mark((function e(){var r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(!0),e.next=4,Object(H.c)(a);case 4:r=e.sent,t(Object(G.a)({},r)),n(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();U(a)&&e()}),[a,t,n]),null},gn=Object(A.default)(ln.a)(Gt||(Gt=Object(S.a)(["\n  && {\n    width: 100%;\n  }\n"]))),On=function(e){var t=e.appList,n=Object(on.e)({subscription:{visited:!0}}).visited,a=(null===n||void 0===n?void 0:n.appUrl)?Object(X.c)(X.p,hn,Object(H.h)(t)):void 0;return E.a.createElement(gn,{label:"App URL",name:"appUrl",placeholder:"App URL",type:"text",component:I.TextField,validate:a,autoComplete:"off"})},jn=function(e){var t=e.appInfo,n=e.onCancel,a=Object(on.e)({subscription:{valid:!0,validating:!0,visited:!0}}),r=a.valid,c=a.validating,i=a.visited,o=Object(j.useMemo)((function(){var e=(null===i||void 0===i?void 0:i.agreementAccepted)&&(null===i||void 0===i?void 0:i.appUrl);return c||!r||!e||!Object(H.g)(t)}),[c,r,i,t]);return E.a.createElement(Y.b.Footer.Buttons,{cancelButtonProps:{onClick:n},confirmButtonProps:{disabled:o,text:"Add"}})},En=Object(A.default)(I.TextField)(Pt||(Pt=Object(S.a)(["\n  && {\n    width: 385px;\n  }\n"]))),wn=A.default.div(_t||(_t=Object(S.a)(["\n  display: flex;\n  margin: 36px 0 24px 0;\n\n  img {\n    margin-right: 10px;\n  }\n"]))),yn=A.default.div(Ht||(Ht=Object(S.a)(["\n  display: flex;\n  margin-bottom: 24px;\n  flex-direction: column;\n  svg {\n    position: relative;\n    top: 4px;\n    left: 4px;\n  }\n"]))),Tn=A.default.div(qt||(qt=Object(S.a)(["\n  height: 55px;\n  width: 65px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),kn=Object(A.default)(I.Loader)(Vt||(Vt=Object(S.a)(["\n  margin-right: 15px;\n"]))),Cn={appUrl:"",agreementAccepted:!1},Sn=Object(H.e)(),An=function(e){var t=e.appList,n=e.closeModal,a=Object(j.useState)(Sn),r=Object(C.a)(a,2),c=r[0],i=r[1],o=Object(w.g)(),l=Object(w.i)({path:"".concat(F.c,"/:safeAddress")}),s=Object(j.useState)(!1),u=Object(C.a)(s,2),d=u[0],p=u[1];return E.a.createElement(rn.a,{decorators:[vn],initialValues:Cn,onSubmit:function(){var e=[{url:c.url,disabled:!1}].concat(Object(P.a)(t.map((function(e){return{url:e.url,disabled:e.disabled}}))));Object(_.c)(H.a,e);var n="".concat(null===l||void 0===l?void 0:l.url,"/apps?appUrl=").concat(encodeURI(c.url));o.push(n)},testId:"add-apps-form"},(function(){return E.a.createElement(E.a.Fragment,null,E.a.createElement(Y.b.Body,null,E.a.createElement(yn,null,E.a.createElement(I.Text,{size:"xl",as:"span",color:"secondary"},"Safe Apps are third-party extensions."),E.a.createElement(I.Link,{href:"https://docs.gnosis.io/safe/docs/sdks_safe_apps/",target:"_blank",rel:"noreferrer",title:"Learn more about building Safe Apps"},E.a.createElement(I.Text,{size:"xl",as:"span",color:"primary"},"Learn more about building Safe Apps."),E.a.createElement(I.Icon,{size:"sm",type:"externalLink",color:"primary"}))),E.a.createElement(On,{appList:t}),E.a.createElement(xn,{onAppInfo:i,onLoading:p}),E.a.createElement(wn,null,d?E.a.createElement(Tn,null,E.a.createElement(kn,{size:"sm"})):E.a.createElement(cn.a,{alt:"Token image",width:55,src:c.iconUrl}),E.a.createElement(En,{label:"App name",readOnly:!0,value:d?"Loading...":c.name,onChange:function(){}})),E.a.createElement(un,null)),E.a.createElement(Y.b.Footer,null,E.a.createElement(jn,{appInfo:c,onCancel:n})))}))},In=A.default.div(Wt||(Wt=Object(S.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),Ln=Object(A.default)(an.a)(Kt||(Kt=Object(S.a)(["\n  text-decoration: none;\n"]))),zn=Object(A.css)(Jt||(Jt=Object(S.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Rn=A.default.div(Yt||(Yt=Object(S.a)(["\n  width: 100%;\n  height: 100%;\n  ",";\n"])),zn),Dn=A.default.div(Xt||(Xt=Object(S.a)(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(243px, 1fr));\n  column-gap: 20px;\n  row-gap: 20px;\n  justify-content: space-evenly;\n  margin: 0 0 16px 0;\n"]))),Nn=A.default.div(Zt||(Zt=Object(S.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  flex-grow: 1;\n  align-items: center;\n"]))),Mn=A.default.div($t||($t=Object(S.a)(["\n  height: 51px;\n"]))),Fn=Object(A.default)(ee.a)(Qt||(Qt=Object(S.a)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  z-index: 10;\n  padding: 5px;\n  opacity: 0;\n\n  transition: opacity 0.2s ease-in-out;\n"]))),Un=A.default.div(en||(en=Object(S.a)(["\n  position: relative;\n\n  &:hover {\n    "," {\n      opacity: 1;\n    }\n  }\n"])),Fn),Bn=function(){var e=Object(w.i)({path:"".concat(F.c,"/:safeAddress")}),t=Object(L.f)(R.n),n=V(),a=n.appList,r=n.removeApp,c=n.staticAppsList,i=Object(j.useState)(!1),o=Object(C.a)(i,2),l=o[0],s=o[1],u=Object(j.useState)(null),d=Object(C.a)(u,2),p=d[0],m=d[1],f=function(){return s(!1)};return a.length&&t?E.a.createElement(In,null,E.a.createElement(I.Menu,null,E.a.createElement(Mn,null)),E.a.createElement(Nn,null,E.a.createElement(Dn,null,E.a.createElement(tn,{iconUrl:nn,onClick:function(){return s(!0)},buttonText:"Add custom app",iconSize:"lg"}),a.filter((function(e){return e.fetchStatus!==q.a.ERROR})).map((function(t){return E.a.createElement(Un,{key:t.url},E.a.createElement(Ln,{key:t.url,to:"".concat(null===e||void 0===e?void 0:e.url,"/apps?appUrl=").concat(encodeURI(t.url))},E.a.createElement(tn,{isLoading:(n=t,q.a.LOADING===n.fetchStatus),iconUrl:t.iconUrl,name:t.name,description:t.description})),function(e,t){return!t.some((function(t){return t.url===e}))}(t.url,c)&&E.a.createElement(Fn,{title:"Remove",onClick:function(e){e.stopPropagation(),m(t)}},E.a.createElement(I.Icon,{size:"sm",type:"delete",color:"error"})));var n}))),E.a.createElement(I.IconText,{color:"secondary",iconSize:"sm",iconType:"info",text:"These are third-party apps, which means they are not owned, controlled, maintained or audited by Gnosis. Interacting with the apps is at your own risk. Any communication within the Apps is for informational purposes only and must not be construed as investment advice to engage in any transaction.",textSize:"sm"})),l&&E.a.createElement(Y.b,{title:"Add app",description:"Add a custom app to the list of apps",handleClose:f},E.a.createElement(Y.b.Header,{onClose:f},E.a.createElement(Y.b.Header.Title,null,"Add custom app")),E.a.createElement(An,{closeModal:f,appList:a})),p&&E.a.createElement(Y.b,{title:"Remove app",description:"Confirm for the app removal",handleClose:function(){return m(null)}},E.a.createElement(Y.b.Header,{onClose:function(){return m(null)}},E.a.createElement(Y.b.Header.Title,null,"Remove app")),E.a.createElement(Y.b.Body,null,E.a.createElement(I.Text,{size:"xl"},"This action will remove"," ",E.a.createElement(I.Text,{size:"xl",strong:!0,as:"span"},p.name)," ","from the interface")),E.a.createElement(Y.b.Footer,null,E.a.createElement(Y.b.Footer.Buttons,{cancelButtonProps:{onClick:function(){return m(null)}},confirmButtonProps:{color:"error",onClick:function(){r(p.url),m(null)},text:"Remove"}})))):E.a.createElement(Rn,null,E.a.createElement(I.Loader,{size:"md"}))};t.default=function(){var e=new URLSearchParams(Object(w.h)().search).get("appUrl");return e?E.a.createElement(Ct,{appUrl:e}):E.a.createElement(Bn,null)}}}]);
//# sourceMappingURL=54.8af9e2c4.chunk.js.map