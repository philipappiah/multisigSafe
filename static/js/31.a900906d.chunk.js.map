{"version":3,"sources":["routes/safe/components/Balances/SendModal/screens/ContractInteraction/Buttons/index.tsx","logic/contractInteraction/sources/ABIService/index.ts","routes/safe/components/Balances/SendModal/screens/ContractInteraction/ContractABI/index.tsx","routes/safe/components/Balances/SendModal/screens/ContractInteraction/EthAddressInput/index.tsx","routes/safe/components/Balances/SendModal/screens/ContractInteraction/FormErrorMessage/index.tsx","routes/safe/components/Balances/SendModal/screens/ContractInteraction/MethodsDropdown/index.tsx","routes/safe/components/Balances/SendModal/screens/ContractInteraction/RenderInputParams/InputComponent/ArrayTypeInput.tsx","routes/safe/components/Balances/SendModal/screens/ContractInteraction/RenderInputParams/InputComponent/index.tsx","routes/safe/components/Balances/SendModal/screens/ContractInteraction/RenderInputParams/index.tsx","routes/safe/components/Balances/SendModal/screens/ContractInteraction/RenderOutputParams/index.tsx","routes/safe/components/Balances/SendModal/screens/ContractInteraction/NativeCoinValue/index.tsx","routes/safe/components/Balances/SendModal/screens/ContractInteraction/index.tsx","components/forms/Field/index.tsx","components/forms/TextField/index.tsx","components/forms/GnoForm/index.tsx","components/layout/Bold/index.tsx","assets/icons/qrcode.svg","components/Divider/index.tsx","components/ScanQRModal/style.ts","components/ScanQRModal/index.tsx","components/ScanQRModal/ScanQRWrapper/index.tsx","routes/safe/components/Balances/SendModal/SafeInfo/index.tsx","routes/safe/components/Balances/SendModal/screens/ContractInteraction/utils/index.ts","routes/safe/components/Balances/SendModal/screens/AddressBookInput/style.ts","routes/safe/components/Balances/SendModal/screens/AddressBookInput/index.tsx","routes/safe/components/Balances/SendModal/screens/ContractInteraction/style.ts","../node_modules/final-form-calculate/dist/final-form-calculate.es.js","../node_modules/@material-ui/core/esm/ListItemIcon/ListItemIcon.js","components/forms/TextAreaField/index.tsx","routes/safe/components/Balances/SendModal/screens/ContractInteraction/Header/index.tsx","routes/safe/components/CurrencyDropdown/img/check.svg","routes/safe/components/CurrencyDropdown/style.ts"],"names":["Buttons","onClose","method","useField","subscription","value","input","useFormState","modifiedSinceLastSubmit","submitError","submitting","valid","validating","Modal","Footer","cancelButtonProps","onClick","confirmButtonProps","disabled","status","ButtonStatus","LOADING","READY","testId","isReadMethod","text","getMethodSignature","inputs","name","params","map","x","type","join","getSignatureHash","signature","web3","utils","keccak256","toString","isAllowedMethod","getMethodAction","stateMutability","includes","extractUsefulMethods","abi","filter","action","methodSignature","signatureHash","getMethodSignatureAndSignatureHash","sort","a","b","toLowerCase","NO_DATA","hasUsefulMethods","JSON","parse","length","e","ContractABI","contractAddress","mutators","useForm","setAbiValue","React","useRef","useEffect","isEthereumAddress","undefined","mustBeEthereumAddress","mustBeEthereumContractAddress","isEthereumContractAddress","getContractABI","current","validateAndSetAbi","Row","margin","Col","TextAreaField","placeholder","validate","useStyles","makeStyles","styles","EthAddressInput","isContract","isRequired","onScannedValue","classes","validatorsList","required","composeValidators","validator","pristine","useState","address","selectedEntry","setSelectedEntry","xs","Field","component","TextField","onChange","event","target","setIsValidAddress","fieldMutator","label","center","className","middle","ScanQRWrapper","handleScan","closeQrModal","scannedAddress","startsWith","replace","FormErrorMessage","align","fullWidth","Paragraph","color","noMargin","size","style","letterSpacing","overflowWrap","MENU_WIDTH","StyledText","styled","Text","MethodsDropdown","useDropdownStyles","buttonWidth","meta","selectedMethodByDefault","initialValues","selectedMethod","setSelectedMethod","methodsList","setMethodsList","methodsListFiltered","setMethodsListFiltered","anchorEl","setAnchorEl","searchParams","setSearchParams","handleClose","NO_CONTRACT","theme","DropdownListTheme","button","currentTarget","classNames","buttonInner","openMenuButton","Menu","anchorOrigin","horizontal","vertical","elevation","getContentAnchorEl","id","keepMounted","open","PaperProps","width","transformOrigin","MenuItem","listItemSearch","key","search","searchIcon","InputBase","root","inputRoot","inputInput","inputProps","dropdownItemsScrollWrapper","listItem","chosenMethod","ListItemText","primary","ListItemIcon","iconRight","alt","src","CheckIcon","values","Array","isArray","typePlaceholder","isAddress","isBoolean","isUint","isInt","isByte","ArrayTypeInput","InputComponent","keyValue","Checkbox","mustBeAddressHash","isArrayParameter","RenderInputParams","validABI","index","generateFormFieldKey","output","lineHeight","height","overflowY","RenderOutputParams","results","multipleResults","outputs","multiline","rowsMax","nativeCoin","getNetworkInfo","NativeCoinValue","onSetMax","ethBalance","useSelector","safeSelector","Boolean","payable","isPayable","ButtonLink","weight","inputAdornment","endAdornment","InputAdornment","position","mustBeFloat","maxValue","ContractInteraction","setCallResults","onNext","switchMethod","isABI","safeAddress","safeParamAddressFromStateSelector","useMemo","saveForm","handleSubmit","submit","txObject","createTxObject","data","encodeABI","call","from","result","handleSubmitError","Header","subTitle","title","Hairline","GnoForm","decorators","ensResolver","formMutators","onSubmit","rest","Block","formContainer","SafeInfo","Divider","withArrow","setContractAddress","setMax","Switch","checked","GnoField","props","overflowStyle","overflow","createStyles","paddingTop","lg","paddingBottom","restInput","rows","helperText","showError","touched","hasError","error","errorMessage","isInactiveAndPristineOrUntouched","active","isInvalidAndUntouched","disableUnderline","statusClasses","autoComplete","inputRootProps","InputProps","stylesBasedOn","padding","flexDirection","flex","children","validation","render","data-testid","form","Bold","this","Wrapper","div","StyledDivider","DividerSRC","heading","justifyContent","maxHeight","boxSizing","loaderContainer","close","secondaryText","detailsContainer","backgroundColor","background","buttonRow","marginLeft","sm","ScanQRModal","isOpen","onScan","fileUploadModalOpen","setFileUploadModalOpen","setError","cameraBlocked","setCameraBlocked","scannerRef","openImageDialog","onFileScannedResolve","successData","console","description","grow","IconButton","disableRipple","layout","legacyMode","onError","err","ref","facingMode","Button","minWidth","variant","qrCodeBtn","cursor","qrModalOpen","setQrModalOpen","role","QRIcon","StyledBlock","border","safeName","state","safeNameSelector","hash","explorerUrl","getExplorerInfo","showAvatar","showCopyBtn","symbol","createDecorator","field","updates","isValidEnsName","isValidCryptoDomainName","getAddressFromDomain","resolvedAddress","message","args","changeValue","lastFormState","indexOf","parameter","test","hasOwnProperty","reason","FORM_ERROR","keyType","extractMethodArgs","Number","isInteger","BigNumber","getParsedJSONOrArrayFromString","contract","getWeb3","eth","Contract","methods","getValueFromTxInputs","tx","String","useTextFieldLabelStyle","borderRadius","fontSize","useTextFieldInputStyle","chainId","getNetworkId","BaseAddressBookInput","addressBookEntries","setValidationText","validationText","updateAddressInfo","addressEntry","validateAddress","addressErrorMessage","filteredEntries","filterAddressEntries","inputValue","onInputChange","_","normalizedValue","trimSpaces","isFeatureEnabled","FEATURES","DOMAIN_LOOKUP","logError","Errors","_101","validatedAddress","labelStyles","inputStyles","Autocomplete","closeIcon","openOnFocus","filterOptions","freeSolo","options","renderInput","autoFocus","InputLabelProps","shrink","getOptionLabel","renderOption","display","flexGrow","AddressBookInput","addressBookSelector","errorMsg","ContractsAddressBookInput","setFilteredEntries","filterContractAddressBookEntries","filteredADBK","filterContractAddresses","onSetSelectedEntry","contractAddressErrorMessage","md","annotation","marginRight","headingText","wordBreak","outerData","minHeight","fontFamily","fontStretch","gap","dataInput","selectAddress","gasCostsContainer","isPromise","obj","then","tripleEquals","_len","arguments","calculations","_key","previousValues","subscribe","_ref","batch","runUpdates","isEqual","next","getIn","previous","resolved","Object","keys","forEach","destField","change","update","fields","getRegisteredFields","_ref2","matches","findIndex","f","RegExp","fieldName","other","_objectWithoutProperties","context","ListContext","_extends","clsx","alignItems","alignItemsFlexStart","withStyles","palette","flexShrink","marginTop","textarea","maxWidth","localFlag","backgroundPosition","backgroundRepeat","backgroundSize","etherFlag","iconLeft","fontWeight","outline","textAlign","opacity","borderLeft","borderRight","borderTop","content","right","top","borderBottom","left","pointerEvents","transform","fill"],"mappings":"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","file":"static/js/31.a900906d.chunk.js","sourcesContent":["import React from 'react'\r\nimport { useField, useFormState } from 'react-final-form'\r\n\r\nimport { ButtonStatus, Modal } from 'src/components/Modal'\r\nimport { isReadMethod } from 'src/routes/safe/components/Balances/SendModal/screens/ContractInteraction/utils'\r\n\r\nexport interface ButtonProps {\r\n  onClose: () => void\r\n}\r\n\r\nconst Buttons = ({ onClose }: ButtonProps): React.ReactElement => {\r\n  const {\r\n    input: { value: method },\r\n  } = useField('selectedMethod', { subscription: { value: true } })\r\n  const { modifiedSinceLastSubmit, submitError, submitting, valid, validating } = useFormState({\r\n    subscription: {\r\n      modifiedSinceLastSubmit: true,\r\n      submitError: true,\r\n      submitting: true,\r\n      valid: true,\r\n      validating: true,\r\n    },\r\n  })\r\n\r\n  return (\r\n    <Modal.Footer>\r\n      <Modal.Footer.Buttons\r\n        cancelButtonProps={{ onClick: onClose }}\r\n        confirmButtonProps={{\r\n          disabled: submitting || validating || ((!valid || !!submitError) && !modifiedSinceLastSubmit) || !method,\r\n          status: submitting || validating ? ButtonStatus.LOADING : ButtonStatus.READY,\r\n          testId: `${isReadMethod(method) ? 'call' : 'review'}-tx-btn`,\r\n          text: isReadMethod(method) ? 'Call' : 'Review',\r\n        }}\r\n      />\r\n    </Modal.Footer>\r\n  )\r\n}\r\n\r\nexport default Buttons\r\n","import { AbiItem } from 'web3-utils'\r\n\r\nimport { web3ReadOnly as web3 } from 'src/logic/wallets/getWeb3'\r\n\r\nexport interface AllowedAbiItem extends AbiItem {\r\n  name: string\r\n  type: 'function'\r\n}\r\n\r\nexport interface AbiItemExtended extends AllowedAbiItem {\r\n  action: string\r\n  methodSignature: string\r\n  signatureHash: string\r\n}\r\n\r\nexport const getMethodSignature = ({ inputs, name }: AbiItem): string => {\r\n  const params = inputs?.map((x) => x.type).join(',')\r\n  return `${name}(${params})`\r\n}\r\n\r\nexport const getSignatureHash = (signature: string): string => {\r\n  return web3.utils.keccak256(signature).toString()\r\n}\r\n\r\nexport const getMethodHash = (method: AbiItem): string => {\r\n  const signature = getMethodSignature(method)\r\n  return getSignatureHash(signature)\r\n}\r\n\r\nexport const getMethodSignatureAndSignatureHash = (\r\n  method: AbiItem,\r\n): { methodSignature: string; signatureHash: string } => {\r\n  const methodSignature = getMethodSignature(method)\r\n  const signatureHash = getSignatureHash(methodSignature)\r\n  return { methodSignature, signatureHash }\r\n}\r\n\r\nexport const isAllowedMethod = ({ name, type }: AbiItem): boolean => {\r\n  return type === 'function' && !!name\r\n}\r\n\r\nexport const getMethodAction = ({ stateMutability }: AbiItem): 'read' | 'write' => {\r\n  if (!stateMutability) {\r\n    return 'write'\r\n  }\r\n\r\n  return ['view', 'pure'].includes(stateMutability) ? 'read' : 'write'\r\n}\r\n\r\nexport const extractUsefulMethods = (abi: AbiItem[]): AbiItemExtended[] => {\r\n  const allowedAbiItems = abi.filter(isAllowedMethod) as AllowedAbiItem[]\r\n\r\n  return allowedAbiItems\r\n    .map(\r\n      (method): AbiItemExtended => ({\r\n        action: getMethodAction(method),\r\n        ...getMethodSignatureAndSignatureHash(method),\r\n        ...method,\r\n      }),\r\n    )\r\n    .sort(({ name: a }, { name: b }) => {\r\n      return a.toLowerCase() > b.toLowerCase() ? 1 : -1\r\n    })\r\n}\r\n\r\nexport const isPayable = (method: AbiItem | AbiItemExtended): boolean => {\r\n  return Boolean(method?.payable) || method.stateMutability === 'payable'\r\n}\r\n","import React from 'react'\r\nimport { useField, useForm } from 'react-final-form'\r\n\r\nimport { TextAreaField } from 'src/components/forms/TextAreaField'\r\nimport { mustBeEthereumAddress, mustBeEthereumContractAddress } from 'src/components/forms/validator'\r\nimport Col from 'src/components/layout/Col'\r\nimport Row from 'src/components/layout/Row'\r\nimport { getContractABI } from 'src/config'\r\nimport { extractUsefulMethods } from 'src/logic/contractInteraction/sources/ABIService'\r\n\r\nexport const NO_DATA = 'no data'\r\n\r\nconst hasUsefulMethods = (abi: string): undefined | string => {\r\n  try {\r\n    const parsedABI = extractUsefulMethods(JSON.parse(abi))\r\n\r\n    if (parsedABI.length === 0) {\r\n      return NO_DATA\r\n    }\r\n  } catch (e) {\r\n    return NO_DATA\r\n  }\r\n}\r\n\r\nconst ContractABI = (): React.ReactElement => {\r\n  const {\r\n    input: { value: contractAddress },\r\n  } = useField('contractAddress', { subscription: { value: true } })\r\n  const { mutators } = useForm()\r\n  const setAbiValue = React.useRef(mutators.setAbiValue)\r\n\r\n  React.useEffect(() => {\r\n    const validateAndSetAbi = async () => {\r\n      const isEthereumAddress = mustBeEthereumAddress(contractAddress) === undefined\r\n      const isEthereumContractAddress = (await mustBeEthereumContractAddress(contractAddress)) === undefined\r\n\r\n      if (isEthereumAddress && isEthereumContractAddress) {\r\n        const abi = await getContractABI(contractAddress)\r\n        const isValidABI = hasUsefulMethods(abi) === undefined\r\n\r\n        // this check may help in scenarios where the user first pastes the ABI,\r\n        // and then sets a Proxy contract that has no useful methods\r\n        if (isValidABI) {\r\n          setAbiValue.current(abi)\r\n        }\r\n      }\r\n    }\r\n\r\n    if (contractAddress) {\r\n      validateAndSetAbi()\r\n    }\r\n  }, [contractAddress])\r\n\r\n  return (\r\n    <Row margin=\"sm\">\r\n      <Col>\r\n        <TextAreaField name=\"abi\" placeholder=\"ABI*\" text=\"ABI*\" type=\"text\" validate={hasUsefulMethods} />\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n\r\nexport default ContractABI\r\n","import { makeStyles } from '@material-ui/core/styles'\r\nimport React, { useState } from 'react'\r\nimport { useFormState, useField } from 'react-final-form'\r\n\r\nimport { ScanQRWrapper } from 'src/components/ScanQRModal/ScanQRWrapper'\r\nimport { ContractsAddressBookInput } from 'src/routes/safe/components/Balances/SendModal/screens/AddressBookInput'\r\nimport Field from 'src/components/forms/Field'\r\nimport TextField from 'src/components/forms/TextField'\r\nimport {\r\n  composeValidators,\r\n  mustBeEthereumAddress,\r\n  mustBeEthereumContractAddress,\r\n  required,\r\n  Validator,\r\n} from 'src/components/forms/validator'\r\nimport Col from 'src/components/layout/Col'\r\nimport Row from 'src/components/layout/Row'\r\nimport { styles } from 'src/routes/safe/components/Balances/SendModal/screens/ContractInteraction/style'\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nexport interface EthAddressInputProps {\r\n  isContract?: boolean\r\n  isRequired?: boolean\r\n  name: string\r\n  onScannedValue: (scannedValue: string) => void\r\n  text: string\r\n}\r\n\r\nexport const EthAddressInput = ({\r\n  isContract = true,\r\n  isRequired = true,\r\n  name,\r\n  onScannedValue,\r\n  text,\r\n}: EthAddressInputProps): React.ReactElement => {\r\n  const classes = useStyles()\r\n  const validatorsList = [\r\n    isRequired && required,\r\n    mustBeEthereumAddress,\r\n    isContract && mustBeEthereumContractAddress,\r\n  ] as Validator[]\r\n  const validate = composeValidators(...validatorsList.filter((validator) => validator))\r\n  const { pristine } = useFormState({ subscription: { pristine: true } })\r\n  const {\r\n    input: { value },\r\n  } = useField('contractAddress', { subscription: { value: true } })\r\n  const [selectedEntry, setSelectedEntry] = useState<{ address?: string; name?: string | null } | null>({\r\n    address: value,\r\n    name: '',\r\n  })\r\n\r\n  const handleScan = (value, closeQrModal) => {\r\n    let scannedAddress = value\r\n\r\n    if (scannedAddress.startsWith('ethereum:')) {\r\n      scannedAddress = scannedAddress.replace('ethereum:', '')\r\n    }\r\n\r\n    setSelectedEntry({ address: scannedAddress })\r\n    onScannedValue(scannedAddress)\r\n    closeQrModal()\r\n  }\r\n\r\n  const handleInputChange: React.ChangeEventHandler<HTMLInputElement> = (event) => {\r\n    const { value } = event.target\r\n    setSelectedEntry({ address: value })\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Row margin=\"md\">\r\n        <Col xs={11}>\r\n          {selectedEntry?.address ? (\r\n            <Field\r\n              component={TextField}\r\n              name={name}\r\n              placeholder={text}\r\n              onChange={handleInputChange}\r\n              testId={name}\r\n              text={text}\r\n              type=\"text\"\r\n              validate={validate}\r\n            />\r\n          ) : (\r\n            <ContractsAddressBookInput\r\n              setSelectedEntry={setSelectedEntry}\r\n              setIsValidAddress={() => {}}\r\n              fieldMutator={onScannedValue}\r\n              pristine={pristine}\r\n              label=\"Contract address\"\r\n            />\r\n          )}\r\n        </Col>\r\n        <Col center=\"xs\" className={classes} middle=\"xs\" xs={1}>\r\n          <ScanQRWrapper handleScan={handleScan} />\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  )\r\n}\r\n","import { makeStyles } from '@material-ui/core/styles'\r\nimport React from 'react'\r\nimport { useFormState } from 'react-final-form'\r\n\r\nimport Row from 'src/components/layout/Row'\r\nimport Paragraph from 'src/components/layout/Paragraph'\r\nimport { styles } from 'src/routes/safe/components/Balances/SendModal/screens/ContractInteraction/style'\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nconst FormErrorMessage = () => {\r\n  const classes = useStyles()\r\n  const { modifiedSinceLastSubmit, submitError } = useFormState({\r\n    subscription: { modifiedSinceLastSubmit: true, submitError: true },\r\n  })\r\n\r\n  const hasNewSubmitError = !!submitError && !modifiedSinceLastSubmit\r\n  return hasNewSubmitError ? (\r\n    <Row align=\"center\" className={classes.fullWidth} margin=\"xs\">\r\n      <Paragraph color=\"error\" noMargin size=\"md\" style={{ letterSpacing: '-0.5px', overflowWrap: 'anywhere' }}>\r\n        {submitError}\r\n      </Paragraph>\r\n    </Row>\r\n  ) : null\r\n}\r\n\r\nexport default FormErrorMessage\r\n","import InputBase from '@material-ui/core/InputBase'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport { MuiThemeProvider } from '@material-ui/core/styles'\r\nimport SearchIcon from '@material-ui/icons/Search'\r\nimport classNames from 'classnames'\r\nimport React, { ReactElement, useEffect, useState } from 'react'\r\nimport { useField, useFormState } from 'react-final-form'\r\nimport { AbiItem } from 'web3-utils'\r\n\r\nimport Col from 'src/components/layout/Col'\r\nimport Row from 'src/components/layout/Row'\r\nimport { NO_CONTRACT } from 'src/routes/safe/components/Balances/SendModal/screens/ContractInteraction/utils'\r\nimport CheckIcon from 'src/routes/safe/components/CurrencyDropdown/img/check.svg'\r\nimport { useDropdownStyles } from 'src/routes/safe/components/CurrencyDropdown/style'\r\nimport { DropdownListTheme } from 'src/theme/mui'\r\nimport { extractUsefulMethods, AbiItemExtended } from 'src/logic/contractInteraction/sources/ABIService'\r\nimport { Text } from '@gnosis.pm/safe-react-components'\r\nimport styled from 'styled-components'\r\n\r\nconst MENU_WIDTH = '452px'\r\n\r\nconst StyledText = styled(Text)`\r\n  padding: 4px 0 0 8px;\r\n`\r\n\r\ninterface MethodsDropdownProps {\r\n  onChange: (method: AbiItem) => void\r\n}\r\n\r\nexport const MethodsDropdown = ({ onChange }: MethodsDropdownProps): ReactElement | null => {\r\n  const classes = useDropdownStyles({ buttonWidth: MENU_WIDTH })\r\n  const {\r\n    input: { value: abi },\r\n    meta: { valid },\r\n  } = useField('abi', { subscription: { value: true, valid: true } })\r\n  const {\r\n    initialValues: { selectedMethod: selectedMethodByDefault },\r\n  } = useFormState({ subscription: { initialValues: true } })\r\n  const [selectedMethod, setSelectedMethod] = useState(selectedMethodByDefault ? selectedMethodByDefault : {})\r\n  const [methodsList, setMethodsList] = useState<AbiItemExtended[]>([])\r\n  const [methodsListFiltered, setMethodsListFiltered] = useState<AbiItemExtended[]>([])\r\n\r\n  const [anchorEl, setAnchorEl] = useState(null)\r\n  const [searchParams, setSearchParams] = useState('')\r\n\r\n  useEffect(() => {\r\n    if (abi) {\r\n      try {\r\n        setMethodsList(extractUsefulMethods(JSON.parse(abi)))\r\n      } catch (e) {\r\n        setMethodsList([])\r\n      }\r\n    }\r\n  }, [abi])\r\n\r\n  useEffect(() => {\r\n    setMethodsListFiltered(methodsList.filter(({ name }) => name?.toLowerCase().includes(searchParams.toLowerCase())))\r\n  }, [methodsList, searchParams])\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget)\r\n  }\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null)\r\n  }\r\n\r\n  const onMethodSelectedChanged = (chosenMethod: AbiItem) => {\r\n    setSelectedMethod(chosenMethod)\r\n    onChange(chosenMethod)\r\n    handleClose()\r\n  }\r\n\r\n  if (!valid || !abi || abi === NO_CONTRACT) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <Row margin=\"sm\">\r\n      <Col>\r\n        <MuiThemeProvider theme={DropdownListTheme}>\r\n          <>\r\n            <button className={classes.button} onClick={handleClick} type=\"button\">\r\n              <StyledText\r\n                size=\"md\"\r\n                color=\"placeHolder\"\r\n                className={classNames(classes.buttonInner, anchorEl && classes.openMenuButton)}\r\n              >\r\n                {(selectedMethod as Record<string, string>).name || 'Method'}\r\n              </StyledText>\r\n            </button>\r\n            <Menu\r\n              anchorEl={anchorEl}\r\n              anchorOrigin={{\r\n                horizontal: 'center',\r\n                vertical: 'bottom',\r\n              }}\r\n              elevation={0}\r\n              getContentAnchorEl={null}\r\n              id=\"customizedMenu\"\r\n              keepMounted\r\n              onClose={handleClose}\r\n              open={!!anchorEl}\r\n              PaperProps={{ style: { width: MENU_WIDTH } }}\r\n              transformOrigin={{\r\n                horizontal: 'center',\r\n                vertical: 'top',\r\n              }}\r\n            >\r\n              <MenuItem className={classes.listItemSearch} key=\"0\">\r\n                <div className={classes.search}>\r\n                  <div className={classes.searchIcon}>\r\n                    <SearchIcon />\r\n                  </div>\r\n                  <InputBase\r\n                    classes={{\r\n                      root: classes.inputRoot,\r\n                      input: classes.inputInput,\r\n                    }}\r\n                    inputProps={{ 'aria-label': 'search' }}\r\n                    onChange={(event) => setSearchParams(event.target.value)}\r\n                    placeholder=\"Searchâ€¦\"\r\n                    value={searchParams}\r\n                  />\r\n                </div>\r\n              </MenuItem>\r\n              <div className={classes.dropdownItemsScrollWrapper}>\r\n                {methodsListFiltered.map((method) => {\r\n                  const { action, name, signatureHash } = method\r\n\r\n                  return (\r\n                    <MenuItem\r\n                      className={classes.listItem}\r\n                      key={signatureHash}\r\n                      onClick={() => onMethodSelectedChanged(method)}\r\n                      value={signatureHash}\r\n                    >\r\n                      <ListItemText primary={name} />\r\n                      <ListItemIcon className={classes.iconRight}>\r\n                        {signatureHash === (selectedMethod as Record<string, string>).signatureHash ? (\r\n                          <img alt=\"checked\" src={CheckIcon} />\r\n                        ) : (\r\n                          <span />\r\n                        )}\r\n                      </ListItemIcon>\r\n                      <ListItemIcon className={classes.iconRight}>\r\n                        <div>{action}</div>\r\n                      </ListItemIcon>\r\n                    </MenuItem>\r\n                  )\r\n                })}\r\n              </div>\r\n            </Menu>\r\n          </>\r\n        </MuiThemeProvider>\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nimport { TextAreaField } from 'src/components/forms/TextAreaField'\r\nimport {\r\n  isAddress,\r\n  isBoolean,\r\n  isByte,\r\n  isInt,\r\n  isUint,\r\n} from 'src/routes/safe/components/Balances/SendModal/screens/ContractInteraction/utils'\r\n\r\nconst validator = (value: string): string | undefined => {\r\n  try {\r\n    const values = JSON.parse(value)\r\n\r\n    if (!Array.isArray(values)) {\r\n      return 'be sure to surround value with []'\r\n    }\r\n  } catch (e) {\r\n    return 'invalid format'\r\n  }\r\n}\r\n\r\nconst typePlaceholder = (text: string, type: string): string => {\r\n  if (isAddress(type)) {\r\n    return `${text} E.g.: [\"0xACa94ef8bD5ffEE41947b4585a84BdA5a3d3DA6E\",\"0x1dF62f291b2E969fB0849d99D9Ce41e2F137006e\"]`\r\n  }\r\n\r\n  if (isBoolean(type)) {\r\n    return `${text} E.g.: [true, false, false, true]`\r\n  }\r\n\r\n  if (isUint(type)) {\r\n    return `${text} E.g.: [1000, 212, 320000022, 23]`\r\n  }\r\n\r\n  if (isInt(type)) {\r\n    return `${text} E.g.: [1000, -212, 1232, -1]`\r\n  }\r\n\r\n  if (isByte(type)) {\r\n    return `${text} E.g.: [\"0xc00000000000000000000000000000000000\", \"0xc00000000000000000000000000000000001\"]`\r\n  }\r\n\r\n  return `${text} E.g.: [\"first value\", \"second value\", \"third value\"]`\r\n}\r\n\r\nconst ArrayTypeInput = ({ name, text, type }: { name: string; text: string; type: string }): React.ReactElement => (\r\n  <TextAreaField name={name} placeholder={typePlaceholder(text, type)} text={text} type=\"text\" validate={validator} />\r\n)\r\n\r\nexport default ArrayTypeInput\r\n","import { Checkbox } from '@gnosis.pm/safe-react-components'\r\nimport React, { ReactElement } from 'react'\r\n\r\nimport Col from 'src/components/layout/Col'\r\nimport Field from 'src/components/forms/Field'\r\nimport TextField from 'src/components/forms/TextField'\r\n\r\nimport { composeValidators, mustBeAddressHash, required } from 'src/components/forms/validator'\r\nimport { isArrayParameter } from 'src/routes/safe/components/Balances/SendModal/screens/ContractInteraction/utils'\r\nimport ArrayTypeInput from './ArrayTypeInput'\r\n\r\ntype Props = {\r\n  type: string\r\n  keyValue: string\r\n  placeholder: string\r\n}\r\n\r\nexport const InputComponent = ({ type, keyValue, placeholder }: Props): ReactElement | null => {\r\n  if (!type) {\r\n    return null\r\n  }\r\n\r\n  switch (type) {\r\n    case 'bool': {\r\n      const inputProps = {\r\n        'data-testid': keyValue,\r\n      }\r\n      return (\r\n        <Col>\r\n          <Field component={Checkbox} name={keyValue} label={placeholder} type=\"checkbox\" inputProps={inputProps} />\r\n        </Col>\r\n      )\r\n    }\r\n    case 'address': {\r\n      return (\r\n        <Col>\r\n          <Field\r\n            component={TextField}\r\n            name={keyValue}\r\n            placeholder={placeholder}\r\n            testId={keyValue}\r\n            text={placeholder}\r\n            type=\"text\"\r\n            validate={composeValidators(required, mustBeAddressHash)}\r\n          />\r\n        </Col>\r\n      )\r\n    }\r\n    default: {\r\n      return (\r\n        <Col>\r\n          {isArrayParameter(type) ? (\r\n            <ArrayTypeInput name={keyValue} text={placeholder} type={type} />\r\n          ) : (\r\n            <Field\r\n              component={TextField}\r\n              name={keyValue}\r\n              placeholder={placeholder}\r\n              testId={keyValue}\r\n              text={placeholder}\r\n              type=\"text\"\r\n              validate={required}\r\n            />\r\n          )}\r\n        </Col>\r\n      )\r\n    }\r\n  }\r\n}\r\n","import React, { ReactElement } from 'react'\r\nimport { useField } from 'react-final-form'\r\n\r\nimport Row from 'src/components/layout/Row'\r\n\r\nimport { InputComponent } from './InputComponent'\r\nimport { generateFormFieldKey } from '../utils'\r\nimport { AbiItemExtended } from 'src/logic/contractInteraction/sources/ABIService'\r\n\r\nexport const RenderInputParams = (): ReactElement | null => {\r\n  const {\r\n    meta: { valid: validABI },\r\n  } = useField('abi', { subscription: { valid: true, value: true } })\r\n  const {\r\n    input: { value: method },\r\n  }: { input: { value: AbiItemExtended } } = useField('selectedMethod', { subscription: { value: true } })\r\n  const renderInputs = validABI && !!method && method.inputs?.length\r\n\r\n  return !renderInputs ? null : (\r\n    <>\r\n      {method.inputs?.map(({ name, type }, index) => {\r\n        const placeholder = name ? `${name} (${type})` : type\r\n        const key = generateFormFieldKey(type, method.signatureHash, index)\r\n\r\n        return (\r\n          <Row key={key} margin=\"sm\">\r\n            <InputComponent type={type} keyValue={key} placeholder={placeholder} />\r\n          </Row>\r\n        )\r\n      })}\r\n    </>\r\n  )\r\n}\r\n","import React, { ReactElement } from 'react'\r\nimport { useField } from 'react-final-form'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from 'src/components/forms/TextField'\r\nimport Col from 'src/components/layout/Col'\r\nimport Paragraph from 'src/components/layout/Paragraph'\r\nimport Row from 'src/components/layout/Row'\r\n\r\nconst useStyles = makeStyles({\r\n  output: {\r\n    '& > div > textarea': {\r\n      letterSpacing: '-0.5px',\r\n      lineHeight: '20px',\r\n      height: '40px',\r\n      overflowY: 'auto',\r\n    },\r\n  },\r\n})\r\n\r\nexport const RenderOutputParams = (): ReactElement | null => {\r\n  const classes = useStyles()\r\n  const {\r\n    input: { value: method },\r\n  }: any = useField('selectedMethod', { subscription: { value: true } })\r\n  const {\r\n    input: { value: results },\r\n  }: any = useField('callResults', { subscription: { value: true } })\r\n  const multipleResults = !!method && method.outputs.length > 1\r\n\r\n  if (results == null || results === '') {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Row align=\"left\" margin=\"xs\">\r\n        <Paragraph color=\"primary\" size=\"lg\" style={{ letterSpacing: '-0.5px' }}>\r\n          Call result:\r\n        </Paragraph>\r\n      </Row>\r\n      {method.outputs?.map(({ name, type }, index) => {\r\n        const placeholder = name ? `${name} (${type})` : type\r\n        const key = `methodCallResult-${method.name}_${index}_${type}`\r\n        const value = multipleResults ? results[index] : results\r\n\r\n        return (\r\n          <Row key={key} margin=\"sm\">\r\n            <Col>\r\n              <TextField\r\n                className={classes.output}\r\n                multiline\r\n                disabled\r\n                rowsMax={3}\r\n                input={{ name: key, value: value.toString(), placeholder, type: 'text' }}\r\n                meta={{ valid: true }}\r\n                testId={key}\r\n                text={placeholder}\r\n              />\r\n            </Col>\r\n          </Row>\r\n        )\r\n      })}\r\n    </>\r\n  )\r\n}\r\n","import InputAdornment from '@material-ui/core/InputAdornment'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport React from 'react'\r\nimport { useField } from 'react-final-form'\r\nimport { useSelector } from 'react-redux'\r\n\r\nimport Field from 'src/components/forms/Field'\r\nimport TextField from 'src/components/forms/TextField'\r\nimport { composeValidators, maxValue, mustBeFloat } from 'src/components/forms/validator'\r\nimport ButtonLink from 'src/components/layout/ButtonLink'\r\nimport Col from 'src/components/layout/Col'\r\nimport Paragraph from 'src/components/layout/Paragraph'\r\nimport Row from 'src/components/layout/Row'\r\nimport { isPayable } from 'src/logic/contractInteraction/sources/ABIService'\r\nimport { styles } from 'src/routes/safe/components/Balances/SendModal/screens/ContractInteraction/style'\r\nimport { safeSelector } from 'src/logic/safe/store/selectors'\r\nimport { getNetworkInfo } from 'src/config'\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\ninterface NativeCoinValueProps {\r\n  onSetMax: (nativeCoinBalance: string) => void\r\n}\r\n\r\nconst { nativeCoin } = getNetworkInfo()\r\n\r\nexport const NativeCoinValue = ({ onSetMax }: NativeCoinValueProps): React.ReactElement | null => {\r\n  const classes = useStyles()\r\n  const { ethBalance } = useSelector(safeSelector) || {}\r\n\r\n  const {\r\n    input: { value: method },\r\n  } = useField('selectedMethod', { subscription: { value: true } })\r\n  const disabled = !isPayable(method)\r\n\r\n  if (!ethBalance) {\r\n    return null\r\n  }\r\n\r\n  return disabled ? null : (\r\n    <>\r\n      <Row className={classes.fullWidth} margin=\"xs\">\r\n        <Paragraph color=\"disabled\" noMargin size=\"md\" style={{ letterSpacing: '-0.5px' }}>\r\n          Value\r\n        </Paragraph>\r\n        <ButtonLink\r\n          color={disabled ? 'disabled' : 'secondary'}\r\n          onClick={() => !disabled && onSetMax(ethBalance)}\r\n          weight=\"bold\"\r\n        >\r\n          Send max\r\n        </ButtonLink>\r\n      </Row>\r\n      <Row margin=\"md\">\r\n        <Col>\r\n          <Field\r\n            component={TextField}\r\n            disabled={disabled}\r\n            inputAdornment={{\r\n              endAdornment: <InputAdornment position=\"end\">{nativeCoin.name}</InputAdornment>,\r\n              disabled,\r\n            }}\r\n            name=\"value\"\r\n            placeholder=\"Value\"\r\n            text=\"Value\"\r\n            type=\"text\"\r\n            validate={!disabled && composeValidators(mustBeFloat, maxValue(ethBalance))}\r\n          />\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  )\r\n}\r\n","import { makeStyles } from '@material-ui/core/styles'\r\nimport React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport { styles } from './style'\r\nimport Divider from 'src/components/Divider'\r\nimport GnoForm from 'src/components/forms/GnoForm'\r\nimport Block from 'src/components/layout/Block'\r\nimport Hairline from 'src/components/layout/Hairline'\r\nimport SafeInfo from 'src/routes/safe/components/Balances/SendModal/SafeInfo'\r\nimport { safeParamAddressFromStateSelector } from 'src/logic/safe/store/selectors'\r\nimport Paragraph from 'src/components/layout/Paragraph'\r\nimport Buttons from './Buttons'\r\nimport ContractABI from './ContractABI'\r\nimport { EthAddressInput } from './EthAddressInput'\r\nimport FormErrorMessage from './FormErrorMessage'\r\nimport { Header } from './Header'\r\nimport { MethodsDropdown } from './MethodsDropdown'\r\nimport { RenderInputParams } from './RenderInputParams'\r\nimport { RenderOutputParams } from './RenderOutputParams'\r\nimport { createTxObject, formMutators, handleSubmitError, isReadMethod, ensResolver } from './utils'\r\nimport { TransactionReviewType } from './Review'\r\nimport { NativeCoinValue } from './NativeCoinValue'\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nexport interface CreatedTx {\r\n  contractAddress: string\r\n  data: string\r\n  selectedMethod: TransactionReviewType\r\n  value: string | number\r\n}\r\n\r\nexport type ContractInteractionTx = {\r\n  contractAddress?: string\r\n}\r\n\r\nexport interface ContractInteractionProps {\r\n  contractAddress?: string\r\n  initialValues: ContractInteractionTx\r\n  isABI: boolean\r\n  onClose: () => void\r\n  switchMethod: () => void\r\n  onNext: (tx: CreatedTx, submit: boolean) => void\r\n}\r\n\r\nconst ContractInteraction: React.FC<ContractInteractionProps> = ({\r\n  contractAddress,\r\n  initialValues,\r\n  onClose,\r\n  onNext,\r\n  switchMethod,\r\n  isABI,\r\n}) => {\r\n  const classes = useStyles()\r\n  const safeAddress = useSelector(safeParamAddressFromStateSelector)\r\n  let setCallResults\r\n\r\n  React.useMemo(() => {\r\n    if (contractAddress) {\r\n      initialValues.contractAddress = contractAddress\r\n    }\r\n  }, [contractAddress, initialValues])\r\n\r\n  const saveForm = async (values: CreatedTx): Promise<void> => {\r\n    await handleSubmit(values, false)\r\n    switchMethod()\r\n  }\r\n\r\n  const handleSubmit = async (\r\n    { contractAddress, selectedMethod, value, ...values },\r\n    submit = true,\r\n  ): Promise<void | Record<string, string>> => {\r\n    if (value || (contractAddress && selectedMethod)) {\r\n      try {\r\n        const txObject = createTxObject(selectedMethod, contractAddress, values)\r\n        const data = txObject.encodeABI()\r\n\r\n        if (isReadMethod(selectedMethod) && submit) {\r\n          const result = await txObject.call({ from: safeAddress })\r\n          setCallResults(result)\r\n\r\n          // this was a read method, so we won't go to the 'review' screen\r\n          return\r\n        }\r\n\r\n        onNext({ ...values, contractAddress, data, selectedMethod, value }, submit)\r\n      } catch (error) {\r\n        return handleSubmitError(error, values)\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Header onClose={onClose} subTitle=\"1 of 2\" title=\"Contract interaction\" />\r\n      <Hairline />\r\n      <GnoForm\r\n        decorators={[ensResolver]}\r\n        formMutators={formMutators}\r\n        initialValues={initialValues}\r\n        onSubmit={handleSubmit}\r\n        subscription={{ submitting: true, pristine: true, values: true }}\r\n      >\r\n        {(submitting, validating, rest, mutators) => {\r\n          setCallResults = mutators.setCallResults\r\n          return (\r\n            <>\r\n              <Block className={classes.formContainer}>\r\n                <SafeInfo />\r\n                <Divider withArrow />\r\n                <EthAddressInput\r\n                  name=\"contractAddress\"\r\n                  onScannedValue={mutators.setContractAddress}\r\n                  text=\"Contract address*\"\r\n                />\r\n                <ContractABI />\r\n                <MethodsDropdown onChange={mutators.setSelectedMethod} />\r\n                <NativeCoinValue onSetMax={mutators.setMax} />\r\n                <RenderInputParams />\r\n                <RenderOutputParams />\r\n                <FormErrorMessage />\r\n                <Paragraph color=\"disabled\" noMargin size=\"lg\" style={{ letterSpacing: '-0.5px' }}>\r\n                  <Switch checked={!isABI} onChange={() => saveForm(rest.values)} />\r\n                  Use custom data (hex encoded)\r\n                </Paragraph>\r\n              </Block>\r\n              <Buttons onClose={onClose} />\r\n            </>\r\n          )\r\n        }}\r\n      </GnoForm>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ContractInteraction\r\n","import React from 'react'\r\nimport { Field } from 'react-final-form'\r\n\r\n// $FlowFixMe\r\nconst GnoField = ({ ...props }: any) => <Field {...props} />\r\n\r\nexport default GnoField\r\n","import MuiTextField from '@material-ui/core/TextField'\r\nimport { createStyles, makeStyles } from '@material-ui/core/styles'\r\nimport React from 'react'\r\n\r\nimport { lg } from 'src/theme/variables'\r\n\r\n// Neded for solving a fix in Windows browsers\r\nconst overflowStyle = {\r\n  overflow: 'hidden',\r\n  width: '100%',\r\n}\r\n\r\nconst styles = () =>\r\n  createStyles({\r\n    root: {\r\n      paddingTop: lg,\r\n      paddingBottom: '12px',\r\n      lineHeight: 0,\r\n    },\r\n  })\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\ntype Props = {\r\n  input: {\r\n    name: string\r\n    onChange?: () => void\r\n    value: string\r\n    placeholder: string\r\n    type: string\r\n  }\r\n  meta: {\r\n    touched?: boolean\r\n    pristine?: boolean\r\n    valid?: boolean\r\n    error?: string\r\n    modifiedSinceLastSubmit?: boolean\r\n    submitError?: boolean\r\n    active?: boolean\r\n  }\r\n  inputAdornment?: { endAdornment: React.ReactElement } | undefined\r\n  multiline: boolean\r\n  rows?: string\r\n  testId: string\r\n  text: string\r\n  disabled?: boolean\r\n  rowsMax?: number\r\n  className?: string\r\n}\r\n\r\nconst TextField = (props: Props): React.ReactElement => {\r\n  const {\r\n    input: { name, onChange, value, ...restInput },\r\n    inputAdornment,\r\n    meta,\r\n    multiline,\r\n    rows,\r\n    testId,\r\n    text,\r\n    ...rest\r\n  } = props\r\n  const classes = useStyles()\r\n  const helperText = value ? text : undefined\r\n  const showError = (meta.touched || !meta.pristine) && !meta.valid\r\n  const hasError = !!meta.error || (!meta.modifiedSinceLastSubmit && !!meta.submitError)\r\n  const errorMessage = meta.error || meta.submitError\r\n  const isInactiveAndPristineOrUntouched = !meta.active && (meta.pristine || !meta.touched)\r\n  const isInvalidAndUntouched = typeof meta.error === 'undefined' ? true : !meta.touched\r\n\r\n  const disableUnderline = isInactiveAndPristineOrUntouched && isInvalidAndUntouched\r\n\r\n  const inputRoot = helperText ? classes.root : ''\r\n  const statusClasses = meta.valid ? 'isValid' : hasError && showError ? 'isInvalid' : ''\r\n  const inputProps = {\r\n    ...restInput,\r\n    autoComplete: 'off',\r\n    'data-testid': testId,\r\n  }\r\n  const inputRootProps = {\r\n    ...inputAdornment,\r\n    className: `${inputRoot} ${statusClasses}`,\r\n    disableUnderline: disableUnderline,\r\n  }\r\n\r\n  return (\r\n    <MuiTextField\r\n      error={hasError && showError}\r\n      helperText={hasError && showError ? errorMessage : helperText || ' '}\r\n      inputProps={inputProps} // blank in order to force to have helper text\r\n      InputProps={inputRootProps}\r\n      multiline={multiline}\r\n      name={name}\r\n      onChange={onChange}\r\n      rows={rows}\r\n      style={overflowStyle}\r\n      value={value}\r\n      {...rest}\r\n    />\r\n  )\r\n}\r\n\r\nexport default TextField\r\n","import * as React from 'react'\r\nimport { Form } from 'react-final-form'\r\n\r\nconst stylesBasedOn = (padding) => ({\r\n  padding: `0 ${padding}%`,\r\n  flexDirection: 'column',\r\n  flex: '1 0 auto',\r\n})\r\n\r\nconst GnoForm = ({\r\n  children,\r\n  decorators,\r\n  formMutators,\r\n  initialValues,\r\n  onSubmit,\r\n  padding = 0,\r\n  subscription,\r\n  testId = '',\r\n  validation,\r\n}: any) => (\r\n  <Form\r\n    decorators={decorators}\r\n    initialValues={initialValues}\r\n    mutators={formMutators}\r\n    onSubmit={onSubmit}\r\n    render={({ handleSubmit, ...rest }) => (\r\n      <form data-testid={testId} onSubmit={handleSubmit} style={stylesBasedOn(padding) as any}>\r\n        {children(rest.submitting, rest.validating, rest, rest.form.mutators)}\r\n      </form>\r\n    )}\r\n    subscription={subscription}\r\n    validate={validation}\r\n  />\r\n)\r\n\r\nexport default GnoForm\r\n","import * as React from 'react'\r\n\r\nclass Bold extends React.PureComponent<any> {\r\n  render() {\r\n    const { children, ...props } = this.props\r\n\r\n    return <b {...props}>{children}</b>\r\n  }\r\n}\r\n\r\nexport default Bold\r\n","export default __webpack_public_path__ + \"static/media/qrcode.f0b048aa.svg\";","import React, { ReactElement } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Icon, Divider as DividerSRC } from '@gnosis.pm/safe-react-components'\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin: 8px 0;\r\n\r\n  svg {\r\n    margin: 0 12px 0 4px;\r\n  }\r\n`\r\nconst StyledDivider = styled(DividerSRC)`\r\n  width: 100%;\r\n`\r\n\r\ntype Props = {\r\n  withArrow?: boolean\r\n}\r\n\r\nconst Divider = ({ withArrow }: Props): ReactElement => (\r\n  <Wrapper>\r\n    {withArrow && <Icon type=\"arrowDown\" size=\"md\" />}\r\n    <StyledDivider />\r\n  </Wrapper>\r\n)\r\n\r\nexport default Divider\r\n","import { background, lg, secondaryText, sm } from 'src/theme/variables'\r\nimport { createStyles } from '@material-ui/core'\r\n\r\nexport const styles = createStyles({\r\n  heading: {\r\n    padding: lg,\r\n    justifyContent: 'space-between',\r\n    maxHeight: '75px',\r\n    boxSizing: 'border-box',\r\n  },\r\n  loaderContainer: {\r\n    width: '100%',\r\n    height: '100%',\r\n  },\r\n  close: {\r\n    height: '25px',\r\n    width: '25px',\r\n    color: secondaryText,\r\n  },\r\n  detailsContainer: {\r\n    backgroundColor: background,\r\n    maxHeight: '450px',\r\n  },\r\n  buttonRow: {\r\n    height: '84px',\r\n    justifyContent: 'center',\r\n  },\r\n  button: {\r\n    '&:last-child': {\r\n      marginLeft: sm,\r\n    },\r\n  },\r\n})\r\n","import IconButton from '@material-ui/core/IconButton'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Close from '@material-ui/icons/Close'\r\nimport * as React from 'react'\r\nimport QrReader from 'react-qr-reader'\r\n\r\nimport { styles } from './style'\r\n\r\nimport Modal from 'src/components/Modal'\r\nimport Block from 'src/components/layout/Block'\r\nimport Button from 'src/components/layout/Button'\r\nimport Col from 'src/components/layout/Col'\r\nimport Hairline from 'src/components/layout/Hairline'\r\nimport Paragraph from 'src/components/layout/Paragraph'\r\nimport Row from 'src/components/layout/Row'\r\nimport { useEffect, useState } from 'react'\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\ntype Props = {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  onScan: (value: string) => void\r\n}\r\n\r\nexport const ScanQRModal = ({ isOpen, onClose, onScan }: Props): React.ReactElement => {\r\n  const classes = useStyles()\r\n  const [fileUploadModalOpen, setFileUploadModalOpen] = useState<boolean>(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [cameraBlocked, setCameraBlocked] = useState<boolean>(false)\r\n  const scannerRef: any = React.createRef()\r\n  const openImageDialog = React.useCallback(() => {\r\n    scannerRef.current.openImageDialog()\r\n  }, [scannerRef])\r\n\r\n  useEffect(() => {\r\n    if (!fileUploadModalOpen && cameraBlocked && !error) {\r\n      setFileUploadModalOpen(true)\r\n      openImageDialog()\r\n    }\r\n  }, [cameraBlocked, openImageDialog, fileUploadModalOpen, setFileUploadModalOpen, error])\r\n\r\n  const onFileScannedResolve = (error: Error | null, successData: string | null) => {\r\n    if (error) {\r\n      console.error('QR code error', error)\r\n\r\n      if (error.name === 'NotAllowedError' || error.name === 'PermissionDismissedError') {\r\n        setCameraBlocked(true)\r\n        setFileUploadModalOpen(false)\r\n      } else {\r\n        setError('The QR could not be read')\r\n      }\r\n      return\r\n    }\r\n\r\n    if (successData) {\r\n      onScan(successData)\r\n    } else if (cameraBlocked) {\r\n      setError('The QR could not be read')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Modal description=\"Receive Tokens Form\" handleClose={onClose} open={isOpen} title=\"Receive Tokens\">\r\n      <Row align=\"center\" className={classes.heading} grow>\r\n        <Paragraph noMargin size=\"xl\">\r\n          Scan QR\r\n        </Paragraph>\r\n        <IconButton disableRipple onClick={onClose}>\r\n          <Close className={classes.close} />\r\n        </IconButton>\r\n      </Row>\r\n      <Hairline />\r\n      <Col className={classes.detailsContainer} layout=\"column\" middle=\"xs\">\r\n        {error && (\r\n          <Block padding=\"md\" margin=\"md\">\r\n            {error}\r\n          </Block>\r\n        )}\r\n        <QrReader\r\n          legacyMode={cameraBlocked}\r\n          onError={(err: Error) => onFileScannedResolve(err, null)}\r\n          onScan={(data: string) => onFileScannedResolve(null, data)}\r\n          ref={scannerRef}\r\n          style={{ width: '400px', height: '400px' }}\r\n          facingMode=\"user\"\r\n        />\r\n      </Col>\r\n      <Hairline />\r\n      <Row align=\"center\" className={classes.buttonRow}>\r\n        <Button className={classes.button} color=\"secondary\" minWidth={154} onClick={onClose}>\r\n          Close\r\n        </Button>\r\n        <Button\r\n          className={classes.button}\r\n          color=\"primary\"\r\n          minWidth={154}\r\n          onClick={() => {\r\n            setCameraBlocked(true)\r\n            setError(null)\r\n            setFileUploadModalOpen(false)\r\n          }}\r\n          variant=\"contained\"\r\n        >\r\n          Upload an image\r\n        </Button>\r\n      </Row>\r\n    </Modal>\r\n  )\r\n}\r\n","import { makeStyles } from '@material-ui/core/styles'\r\nimport React, { ReactElement, useState } from 'react'\r\n\r\nimport QRIcon from 'src/assets/icons/qrcode.svg'\r\nimport { ScanQRModal } from 'src/components/ScanQRModal'\r\nimport Img from 'src/components/layout/Img'\r\n\r\nconst useStyles = makeStyles({\r\n  qrCodeBtn: {\r\n    cursor: 'pointer',\r\n  },\r\n})\r\n\r\ntype Props = {\r\n  handleScan: (dataResult: string, closeQrModal: () => void) => void\r\n}\r\n\r\nexport const ScanQRWrapper = ({ handleScan }: Props): ReactElement => {\r\n  const classes = useStyles()\r\n  const [qrModalOpen, setQrModalOpen] = useState(false)\r\n\r\n  const openQrModal = () => {\r\n    setQrModalOpen(true)\r\n  }\r\n\r\n  const closeQrModal = () => {\r\n    setQrModalOpen(false)\r\n  }\r\n\r\n  const onScanFinished = (value: string) => {\r\n    handleScan(value, closeQrModal)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Img\r\n        alt=\"Scan QR\"\r\n        className={classes.qrCodeBtn}\r\n        height={20}\r\n        onClick={() => openQrModal()}\r\n        role=\"button\"\r\n        src={QRIcon}\r\n        testId=\"qr-icon\"\r\n      />\r\n      {qrModalOpen && <ScanQRModal isOpen={qrModalOpen} onClose={closeQrModal} onScan={onScanFinished} />}\r\n    </>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { EthHashInfo } from '@gnosis.pm/safe-react-components'\r\nimport styled from 'styled-components'\r\n\r\nimport { getExplorerInfo, getNetworkInfo } from 'src/config'\r\nimport { safeNameSelector, safeSelector } from 'src/logic/safe/store/selectors'\r\nimport Paragraph from 'src/components/layout/Paragraph'\r\nimport Bold from 'src/components/layout/Bold'\r\nimport { border, xs } from 'src/theme/variables'\r\nimport Block from 'src/components/layout/Block'\r\n\r\nconst { nativeCoin } = getNetworkInfo()\r\n\r\nconst StyledBlock = styled(Block)`\r\n  font-size: 12px;\r\n  line-height: 1.08;\r\n  letter-spacing: -0.5px;\r\n  background-color: ${border};\r\n  width: fit-content;\r\n  padding: 5px 10px;\r\n  margin-top: ${xs};\r\n  margin-left: 40px;\r\n  border-radius: 3px;\r\n`\r\n\r\nconst SafeInfo = (): React.ReactElement => {\r\n  const { address: safeAddress = '', ethBalance } = useSelector(safeSelector) || {}\r\n  const safeName = useSelector((state) => safeNameSelector(state, safeAddress))\r\n\r\n  return (\r\n    <>\r\n      <EthHashInfo\r\n        hash={safeAddress}\r\n        name={safeName}\r\n        explorerUrl={getExplorerInfo(safeAddress)}\r\n        showAvatar\r\n        showCopyBtn\r\n      />\r\n      {ethBalance && (\r\n        <StyledBlock>\r\n          <Paragraph noMargin>\r\n            Balance: <Bold data-testid=\"current-eth-balance\">{`${ethBalance} ${nativeCoin.symbol}`}</Bold>\r\n          </Paragraph>\r\n        </StyledBlock>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default SafeInfo\r\n","import { FORM_ERROR, Mutator, SubmissionErrors } from 'final-form'\r\nimport createDecorator from 'final-form-calculate'\r\nimport { ContractSendMethod } from 'web3-eth-contract'\r\n\r\nimport { AbiItemExtended } from 'src/logic/contractInteraction/sources/ABIService'\r\nimport { getAddressFromDomain, getWeb3 } from 'src/logic/wallets/getWeb3'\r\nimport { TransactionReviewType } from 'src/routes/safe/components/Balances/SendModal/screens/ContractInteraction/Review'\r\nimport { isValidCryptoDomainName, isValidEnsName } from 'src/logic/wallets/ethAddresses'\r\nimport { BigNumber } from 'bignumber.js'\r\n\r\nexport const NO_CONTRACT = 'no contract'\r\n\r\nexport const ensResolver = createDecorator({\r\n  field: 'contractAddress',\r\n  updates: {\r\n    contractAddress: async (contractAddress) => {\r\n      try {\r\n        const resolvedAddress =\r\n          (isValidEnsName(contractAddress) || isValidCryptoDomainName(contractAddress)) &&\r\n          (await getAddressFromDomain(contractAddress))\r\n\r\n        if (resolvedAddress) {\r\n          return resolvedAddress\r\n        }\r\n\r\n        return contractAddress\r\n      } catch (e) {\r\n        console.error(e.message)\r\n        return contractAddress\r\n      }\r\n    },\r\n  },\r\n})\r\n\r\nexport const formMutators: Record<string, Mutator<{ selectedMethod: { name: string } }>> = {\r\n  setMax: (args, state, utils) => {\r\n    utils.changeValue(state, 'value', () => args[0])\r\n  },\r\n  setContractAddress: (args, state, utils) => {\r\n    utils.changeValue(state, 'contractAddress', () => args[0])\r\n  },\r\n  setSelectedMethod: (args, state, utils) => {\r\n    const modified =\r\n      state.lastFormState?.values.selectedMethod && state.lastFormState.values.selectedMethod.name !== args[0].name\r\n\r\n    if (modified) {\r\n      utils.changeValue(state, 'callResults', () => '')\r\n      utils.changeValue(state, 'value', () => '')\r\n    }\r\n\r\n    utils.changeValue(state, 'selectedMethod', () => args[0])\r\n  },\r\n  setCallResults: (args, state, utils) => {\r\n    utils.changeValue(state, 'callResults', () => args[0])\r\n  },\r\n  setAbiValue: (args, state, utils) => {\r\n    utils.changeValue(state, 'abi', () => args[0])\r\n  },\r\n}\r\n\r\nexport const isAddress = (type: string): boolean => type.indexOf('address') === 0\r\nexport const isBoolean = (type: string): boolean => type.indexOf('bool') === 0\r\nexport const isString = (type: string): boolean => type.indexOf('string') === 0\r\nexport const isUint = (type: string): boolean => type.indexOf('uint') === 0\r\nexport const isInt = (type: string): boolean => type.indexOf('int') === 0\r\nexport const isByte = (type: string): boolean => type.indexOf('byte') === 0\r\n\r\nexport const isArrayParameter = (parameter: string): boolean => /(\\[\\d*])+$/.test(parameter)\r\nexport const getParsedJSONOrArrayFromString = (parameter: string): (string | number)[] | null => {\r\n  try {\r\n    const arrayResult = JSON.parse(parameter)\r\n    return arrayResult.map((value) => {\r\n      if (Number.isInteger(value)) {\r\n        return new BigNumber(value).toString()\r\n      }\r\n      return value\r\n    })\r\n  } catch (err) {\r\n    return null\r\n  }\r\n}\r\n\r\nexport const handleSubmitError = (error: SubmissionErrors, values: Record<string, string>): Record<string, string> => {\r\n  for (const key in values) {\r\n    if (values.hasOwnProperty(key) && error !== undefined && values[key] === error.value) {\r\n      return { [key]: error.reason }\r\n    }\r\n  }\r\n\r\n  // .call() failed and we're logging a generic error\r\n  return { [FORM_ERROR]: error ? error.message : undefined }\r\n}\r\n\r\nexport const generateFormFieldKey = (type: string, signatureHash: string, index: number): string => {\r\n  const keyType = isArrayParameter(type) ? 'arrayParam' : type\r\n  return `methodInput-${signatureHash}_${index}_${keyType}`\r\n}\r\n\r\nconst extractMethodArgs = (signatureHash: string, values: Record<string, string>) => ({ type }, index) => {\r\n  const key = generateFormFieldKey(type, signatureHash, index)\r\n\r\n  return getParsedJSONOrArrayFromString(values[key]) || values[key]\r\n}\r\n\r\nexport const createTxObject = (\r\n  method: AbiItemExtended,\r\n  contractAddress: string,\r\n  values: Record<string, string>,\r\n): ContractSendMethod => {\r\n  const web3 = getWeb3()\r\n  const contract = new web3.eth.Contract([method], contractAddress)\r\n  const { inputs, name = '', signatureHash } = method\r\n  const args = inputs?.map(extractMethodArgs(signatureHash, values)) || []\r\n\r\n  return contract.methods[name](...args)\r\n}\r\n\r\nexport const isReadMethod = (method: AbiItemExtended): boolean => method && method.action === 'read'\r\n\r\nexport const getValueFromTxInputs = (key: string, type: string, tx: TransactionReviewType): string => {\r\n  if (isArrayParameter(type)) {\r\n    key = key.replace('[]', '')\r\n  }\r\n\r\n  let value = tx[key]\r\n\r\n  if (type === 'bool') {\r\n    value = String(value)\r\n  }\r\n\r\n  return value\r\n}\r\n","import { createStyles, makeStyles } from '@material-ui/core'\r\n\r\nexport const useTextFieldLabelStyle = makeStyles(\r\n  createStyles({\r\n    root: {\r\n      overflow: 'hidden',\r\n      borderRadius: 4,\r\n      fontSize: '15px',\r\n      width: '500px',\r\n    },\r\n  }),\r\n)\r\n\r\nexport const useTextFieldInputStyle = makeStyles(\r\n  createStyles({\r\n    root: {\r\n      fontSize: '14px',\r\n      width: '420px',\r\n    },\r\n  }),\r\n)\r\n","import { EthHashInfo } from '@gnosis.pm/safe-react-components'\r\nimport MuiTextField from '@material-ui/core/TextField'\r\nimport Autocomplete, { AutocompleteProps } from '@material-ui/lab/Autocomplete'\r\nimport React, { Dispatch, ReactElement, SetStateAction, useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\n\r\nimport { mustBeEthereumAddress, mustBeEthereumContractAddress } from 'src/components/forms/validator'\r\nimport { getNetworkId, isFeatureEnabled } from 'src/config'\r\nimport { FEATURES } from 'src/config/networks/network.d'\r\nimport { AddressBookEntry } from 'src/logic/addressBook/model/addressBook'\r\nimport { addressBookSelector } from 'src/logic/addressBook/store/selectors'\r\nimport { filterContractAddressBookEntries, filterAddressEntries } from 'src/logic/addressBook/utils'\r\nimport { isValidEnsName, isValidCryptoDomainName } from 'src/logic/wallets/ethAddresses'\r\nimport { getAddressFromDomain } from 'src/logic/wallets/getWeb3'\r\nimport {\r\n  useTextFieldInputStyle,\r\n  useTextFieldLabelStyle,\r\n} from 'src/routes/safe/components/Balances/SendModal/screens/AddressBookInput/style'\r\nimport { trimSpaces } from 'src/utils/strings'\r\nimport { Errors, logError } from 'src/logic/exceptions/CodedException'\r\n\r\nconst chainId = getNetworkId()\r\n\r\nexport interface AddressBookProps {\r\n  fieldMutator: (address: string) => void\r\n  label?: string\r\n  pristine?: boolean\r\n  recipientAddress?: string\r\n  errorMsg?: string\r\n  setIsValidAddress: (valid: boolean) => void\r\n  setSelectedEntry: Dispatch<SetStateAction<{ address: string; name: string }> | null>\r\n}\r\n\r\nexport interface BaseAddressBookInputProps extends AddressBookProps {\r\n  addressBookEntries: AddressBookEntry[]\r\n  setSelectedEntry: (args: { address: string; name: string } | null) => void\r\n  setValidationText: Dispatch<SetStateAction<string | undefined>>\r\n  validationText: string | undefined\r\n}\r\n\r\nconst BaseAddressBookInput = ({\r\n  addressBookEntries,\r\n  fieldMutator,\r\n  label = 'Recipient',\r\n  setIsValidAddress,\r\n  setSelectedEntry,\r\n  setValidationText,\r\n  validationText,\r\n}: BaseAddressBookInputProps): ReactElement => {\r\n  const updateAddressInfo = (addressEntry: AddressBookEntry): void => {\r\n    setSelectedEntry(addressEntry)\r\n    fieldMutator(addressEntry.address)\r\n  }\r\n\r\n  const validateAddress = (address: string): AddressBookEntry | string | undefined => {\r\n    const addressErrorMessage = mustBeEthereumAddress(address)\r\n    setIsValidAddress(!addressErrorMessage)\r\n\r\n    if (addressErrorMessage) {\r\n      setValidationText(addressErrorMessage)\r\n      return\r\n    }\r\n\r\n    const filteredEntries = filterAddressEntries(addressBookEntries, { inputValue: address })\r\n    return filteredEntries.length === 1 ? filteredEntries[0] : address\r\n  }\r\n\r\n  const onChange: AutocompleteProps<AddressBookEntry, false, false, true>['onChange'] = (_, value, reason) => {\r\n    switch (reason) {\r\n      case 'select-option': {\r\n        const { address, name, chainId } = value as AddressBookEntry\r\n        updateAddressInfo({ address, name, chainId })\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  const onInputChange: AutocompleteProps<AddressBookEntry, false, false, true>['onInputChange'] = async (\r\n    _,\r\n    value,\r\n    reason,\r\n  ) => {\r\n    switch (reason) {\r\n      case 'input': {\r\n        const normalizedValue = trimSpaces(value)\r\n\r\n        if (!normalizedValue) {\r\n          break\r\n        }\r\n\r\n        // ENS-enabled resolve/validation\r\n        if (\r\n          isFeatureEnabled(FEATURES.DOMAIN_LOOKUP) &&\r\n          (isValidEnsName(normalizedValue) || isValidCryptoDomainName(normalizedValue))\r\n        ) {\r\n          let address = ''\r\n          try {\r\n            address = await getAddressFromDomain(normalizedValue)\r\n          } catch (err) {\r\n            logError(Errors._101, err.message)\r\n          }\r\n\r\n          const validatedAddress = validateAddress(address)\r\n\r\n          if (!validatedAddress) {\r\n            fieldMutator('')\r\n            break\r\n          }\r\n\r\n          const newEntry =\r\n            typeof validatedAddress === 'string'\r\n              ? {\r\n                  address,\r\n                  name: normalizedValue,\r\n                  chainId,\r\n                }\r\n              : validatedAddress\r\n\r\n          updateAddressInfo(newEntry)\r\n          break\r\n        }\r\n\r\n        // ETH address validation\r\n        const validatedAddress = validateAddress(normalizedValue)\r\n\r\n        if (!validatedAddress) {\r\n          fieldMutator('')\r\n          break\r\n        }\r\n\r\n        const newEntry =\r\n          typeof validatedAddress === 'string'\r\n            ? {\r\n                address: validatedAddress,\r\n                name: '',\r\n                chainId,\r\n              }\r\n            : validatedAddress\r\n\r\n        updateAddressInfo(newEntry)\r\n\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  const labelStyles = useTextFieldLabelStyle()\r\n  const inputStyles = useTextFieldInputStyle()\r\n\r\n  return (\r\n    <Autocomplete<AddressBookEntry, false, false, true>\r\n      closeIcon={null}\r\n      openOnFocus={false}\r\n      filterOptions={filterAddressEntries}\r\n      freeSolo\r\n      onChange={onChange}\r\n      onInputChange={onInputChange}\r\n      options={addressBookEntries}\r\n      id=\"address-book-input\"\r\n      renderInput={(params) => (\r\n        <MuiTextField\r\n          {...params}\r\n          autoFocus={true}\r\n          error={!!validationText}\r\n          fullWidth\r\n          variant=\"filled\"\r\n          label={validationText ? validationText : label}\r\n          InputLabelProps={{ shrink: true, required: true, classes: labelStyles }}\r\n          InputProps={{ ...params.InputProps, classes: inputStyles }}\r\n        />\r\n      )}\r\n      getOptionLabel={({ address }) => address}\r\n      renderOption={({ address, name }) => <EthHashInfo hash={address} name={name} showAvatar />}\r\n      role=\"listbox\"\r\n      style={{ display: 'flex', flexGrow: 1 }}\r\n    />\r\n  )\r\n}\r\n\r\nexport const AddressBookInput = (props: AddressBookProps): ReactElement => {\r\n  const addressBookEntries = useSelector(addressBookSelector)\r\n  const [validationText, setValidationText] = useState<string>('')\r\n\r\n  useEffect(() => {\r\n    if (props.errorMsg) {\r\n      setValidationText(props.errorMsg)\r\n    }\r\n  }, [props.errorMsg])\r\n\r\n  return (\r\n    <BaseAddressBookInput\r\n      addressBookEntries={addressBookEntries}\r\n      setValidationText={setValidationText}\r\n      validationText={validationText}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport const ContractsAddressBookInput = ({\r\n  setIsValidAddress,\r\n  setSelectedEntry,\r\n  ...props\r\n}: AddressBookProps): ReactElement => {\r\n  const addressBookEntries = useSelector(addressBookSelector)\r\n  const [filteredEntries, setFilteredEntries] = useState<AddressBookEntry[]>([])\r\n  const [validationText, setValidationText] = useState<string>('')\r\n\r\n  useEffect(() => {\r\n    const filterContractAddresses = async (): Promise<void> => {\r\n      const filteredADBK = await filterContractAddressBookEntries(addressBookEntries)\r\n      setFilteredEntries(filteredADBK)\r\n    }\r\n    filterContractAddresses()\r\n  }, [addressBookEntries])\r\n\r\n  const onSetSelectedEntry = async (selectedEntry) => {\r\n    if (selectedEntry?.address) {\r\n      // verify if `address` is a contract\r\n      const contractAddressErrorMessage = await mustBeEthereumContractAddress(selectedEntry.address)\r\n      setIsValidAddress(!contractAddressErrorMessage)\r\n      setValidationText(contractAddressErrorMessage ?? '')\r\n      setSelectedEntry(selectedEntry)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <BaseAddressBookInput\r\n      addressBookEntries={filteredEntries}\r\n      setIsValidAddress={setIsValidAddress}\r\n      setSelectedEntry={onSetSelectedEntry}\r\n      setValidationText={setValidationText}\r\n      validationText={validationText}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n","import { lg, md, secondaryText, sm, border, background } from 'src/theme/variables'\r\nimport { createStyles } from '@material-ui/core'\r\n\r\nexport const styles = createStyles({\r\n  heading: {\r\n    padding: `${md} ${lg}`,\r\n    justifyContent: 'flex-start',\r\n    boxSizing: 'border-box',\r\n    maxHeight: '74px',\r\n  },\r\n  annotation: {\r\n    letterSpacing: '-1px',\r\n    color: secondaryText,\r\n    marginRight: 'auto',\r\n    marginLeft: '20px',\r\n  },\r\n  headingText: {\r\n    fontSize: lg,\r\n  },\r\n  closeIcon: {\r\n    height: '35px',\r\n    width: '35px',\r\n  },\r\n  qrCodeBtn: {\r\n    cursor: 'pointer',\r\n  },\r\n  formContainer: {\r\n    padding: `${md} ${lg}`,\r\n    wordBreak: 'break-word',\r\n  },\r\n  value: {\r\n    marginLeft: sm,\r\n  },\r\n  outerData: {\r\n    borderRadius: '5px',\r\n    border: `1px solid ${border}`,\r\n    padding: '11px',\r\n    minHeight: '21px',\r\n  },\r\n  data: {\r\n    wordBreak: 'break-all',\r\n    overflow: 'auto',\r\n    fontSize: '14px',\r\n    fontFamily: 'Averta',\r\n    maxHeight: '100px',\r\n    letterSpacing: 'normal',\r\n    fontStretch: 'normal',\r\n    lineHeight: '1.43',\r\n  },\r\n  buttonRow: {\r\n    height: '84px',\r\n    justifyContent: 'center',\r\n    gap: '16px',\r\n  },\r\n  dataInput: {\r\n    '& TextField-root-294': {\r\n      lineHeight: 'auto',\r\n      border: 'green',\r\n    },\r\n  },\r\n  selectAddress: {\r\n    cursor: 'pointer',\r\n  },\r\n  fullWidth: {\r\n    justifyContent: 'space-between',\r\n  },\r\n  gasCostsContainer: {\r\n    backgroundColor: background,\r\n    padding: `0 ${lg}`,\r\n  },\r\n})\r\n","import { getIn } from 'final-form';\n\nvar isPromise = (function (obj) {\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n});\n\n//      \n\nvar tripleEquals = function tripleEquals(a, b) {\n  return a === b;\n};\n\nvar createDecorator = function createDecorator() {\n  for (var _len = arguments.length, calculations = new Array(_len), _key = 0; _key < _len; _key++) {\n    calculations[_key] = arguments[_key];\n  }\n\n  return function (form) {\n    var previousValues = {};\n    var unsubscribe = form.subscribe(function (_ref) {\n      var values = _ref.values;\n      form.batch(function () {\n        var runUpdates = function runUpdates(field, isEqual, updates) {\n          var next = values && getIn(values, field);\n          var previous = previousValues && getIn(previousValues, field);\n\n          if (!isEqual(next, previous)) {\n            if (typeof updates === 'function') {\n              var results = updates(next, field, values, previousValues);\n\n              if (isPromise(results)) {\n                results.then(function (resolved) {\n                  Object.keys(resolved).forEach(function (destField) {\n                    form.change(destField, resolved[destField]);\n                  });\n                });\n              } else {\n                Object.keys(results).forEach(function (destField) {\n                  form.change(destField, results[destField]);\n                });\n              }\n            } else {\n              Object.keys(updates).forEach(function (destField) {\n                var update = updates[destField];\n                var result = update(next, values, previousValues);\n\n                if (isPromise(result)) {\n                  result.then(function (resolved) {\n                    form.change(destField, resolved);\n                  });\n                } else {\n                  form.change(destField, result);\n                }\n              });\n            }\n          }\n        };\n\n        var fields = form.getRegisteredFields();\n        calculations.forEach(function (_ref2) {\n          var field = _ref2.field,\n              isEqual = _ref2.isEqual,\n              updates = _ref2.updates;\n\n          if (typeof field === 'string') {\n            runUpdates(field, isEqual || tripleEquals, updates);\n          } else {\n            // field is a either array or regex\n            var matches = Array.isArray(field) ? function (name) {\n              return ~field.indexOf(name) || field.findIndex(function (f) {\n                return f instanceof RegExp && f.test(name);\n              }) !== -1;\n            } : function (name) {\n              return field.test(name);\n            };\n            fields.forEach(function (fieldName) {\n              if (matches(fieldName)) {\n                runUpdates(fieldName, isEqual || tripleEquals, updates);\n              }\n            });\n          }\n        });\n        previousValues = values;\n      });\n    }, {\n      values: true\n    });\n    return unsubscribe;\n  };\n};\n\n//\n\nexport default createDecorator;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport ListContext from '../List/ListContext';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      minWidth: 56,\n      color: theme.palette.action.active,\n      flexShrink: 0,\n      display: 'inline-flex'\n    },\n\n    /* Styles applied to the root element when the parent `ListItem` uses `alignItems=\"flex-start\"`. */\n    alignItemsFlexStart: {\n      marginTop: 8\n    }\n  };\n};\n/**\n * A simple wrapper to apply `List` styles to an `Icon` or `SvgIcon`.\n */\n\nvar ListItemIcon = /*#__PURE__*/React.forwardRef(function ListItemIcon(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\"]);\n\n  var context = React.useContext(ListContext);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, context.alignItems === 'flex-start' && classes.alignItemsFlexStart),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? ListItemIcon.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component, normally `Icon`, `SvgIcon`,\n   * or a `@material-ui/icons` SVG icon element.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiListItemIcon'\n})(ListItemIcon);","import { createStyles, makeStyles } from '@material-ui/core/styles'\r\nimport React, { ReactElement } from 'react'\r\n\r\nimport Field from 'src/components/forms/Field'\r\nimport TextField from 'src/components/forms/TextField'\r\n\r\nconst styles = createStyles({\r\n  textarea: {\r\n    '& > div': {\r\n      height: '140px',\r\n      paddingTop: '0',\r\n      paddingBottom: '0',\r\n      alignItems: 'auto',\r\n      '& > textarea': {\r\n        fontSize: '15px',\r\n        letterSpacing: '-0.5px',\r\n        lineHeight: '20px',\r\n        height: '102px',\r\n      },\r\n    },\r\n  },\r\n})\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\nexport const TextAreaField = ({ ...props }): ReactElement => {\r\n  const classes = useStyles()\r\n  return <Field {...props} className={classes.textarea} component={TextField} multiline rows=\"5\" />\r\n}\r\n","import IconButton from '@material-ui/core/IconButton'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Close from '@material-ui/icons/Close'\r\nimport React, { ReactElement } from 'react'\r\n\r\nimport Paragraph from 'src/components/layout/Paragraph'\r\nimport Row from 'src/components/layout/Row'\r\nimport { styles } from 'src/routes/safe/components/Balances/SendModal/screens/ContractInteraction/style'\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\ninterface HeaderProps {\r\n  onClose: () => void\r\n  subTitle: string\r\n  title: string\r\n}\r\n\r\nexport const Header = ({ onClose, subTitle, title }: HeaderProps): ReactElement => {\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <Row align=\"center\" className={classes.heading} grow>\r\n      <Paragraph className={classes.headingText} noMargin weight=\"bolder\">\r\n        {title}\r\n      </Paragraph>\r\n      <Paragraph className={classes.annotation}>{subTitle}</Paragraph>\r\n      <IconButton disableRipple onClick={onClose}>\r\n        <Close className={classes.closeIcon} />\r\n      </IconButton>\r\n    </Row>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/check.bdba8480.svg\";","import { makeStyles } from '@material-ui/core/styles'\r\n\r\nconst buttonWidth = '140px'\r\nexport const useDropdownStyles = makeStyles({\r\n  listItem: {\r\n    maxWidth: (props: any) => (props.buttonWidth ? props.buttonWidth : buttonWidth),\r\n    boxSizing: 'border-box',\r\n  },\r\n  listItemSearch: {\r\n    maxWidth: (props: any) => (props.buttonWidth ? props.buttonWidth : buttonWidth),\r\n    padding: '0',\r\n    boxSizing: 'border-box',\r\n  },\r\n  localFlag: {\r\n    backgroundPosition: '50% 50%',\r\n    backgroundRepeat: 'no-repeat',\r\n    backgroundSize: 'contain',\r\n    height: '20px !important',\r\n    width: '26px !important',\r\n  },\r\n  etherFlag: {\r\n    backgroundPosition: '50% 50%',\r\n    backgroundRepeat: 'no-repeat',\r\n    backgroundSize: 'contain',\r\n    width: '26px',\r\n    height: '26px',\r\n  },\r\n  iconLeft: {\r\n    marginRight: '10px',\r\n  },\r\n  iconRight: {\r\n    marginLeft: '18px',\r\n  },\r\n  button: {\r\n    backgroundColor: '#e8e7e6',\r\n    border: 'none',\r\n    borderRadius: '3px',\r\n    boxSizing: 'border-box',\r\n    color: '#5d6d74',\r\n    cursor: 'pointer',\r\n    fontSize: '12px',\r\n    fontWeight: 'normal',\r\n    height: '24px',\r\n    lineHeight: '1.33',\r\n    marginRight: '20px',\r\n    minWidth: (props: any) => (props.buttonWidth ? props.buttonWidth : buttonWidth),\r\n    outline: 'none',\r\n    padding: '0',\r\n    textAlign: 'left',\r\n    '&:active': {\r\n      opacity: '0.8',\r\n    },\r\n  },\r\n  buttonInner: {\r\n    boxSizing: 'border-box',\r\n    display: 'block',\r\n    height: '100%',\r\n    lineHeight: '24px',\r\n    padding: '0 22px 0 8px',\r\n    position: 'relative',\r\n    width: '100%',\r\n    '&::after': {\r\n      borderLeft: '5px solid transparent',\r\n      borderRight: '5px solid transparent',\r\n      borderTop: '5px solid #5d6d74',\r\n      content: '\"\"',\r\n      height: '0',\r\n      position: 'absolute',\r\n      right: '8px',\r\n      top: '9px',\r\n      width: '0',\r\n    },\r\n  },\r\n  openMenuButton: {\r\n    '&::after': {\r\n      borderBottom: '5px solid #5d6d74',\r\n      borderLeft: '5px solid transparent',\r\n      borderRight: '5px solid transparent',\r\n      borderTop: 'none',\r\n    },\r\n  },\r\n  dropdownItemsScrollWrapper: {\r\n    maxHeight: '280px',\r\n    overflow: 'auto',\r\n  },\r\n  search: {\r\n    position: 'relative',\r\n    borderRadius: '0',\r\n    backgroundColor: '#fff',\r\n    '&:hover': {\r\n      backgroundColor: '#fff',\r\n    },\r\n    marginRight: 0,\r\n    width: '100%',\r\n  },\r\n  searchIcon: {\r\n    alignItems: 'center',\r\n    display: 'flex',\r\n    height: '100%',\r\n    justifyContent: 'center',\r\n    left: '12px',\r\n    margin: '0',\r\n    pointerEvents: 'none',\r\n    position: 'absolute',\r\n    top: '50%',\r\n    transform: 'translateY(-50%)',\r\n    width: '18px',\r\n    '& path': {\r\n      fill: '#b2b5b2',\r\n    },\r\n  },\r\n  inputRoot: {\r\n    color: '#5d6d74',\r\n    fontSize: '14px',\r\n    fontWeight: 'normal',\r\n    lineHeight: '1.43',\r\n    width: '100%',\r\n  },\r\n  inputInput: {\r\n    boxSizing: 'border-box',\r\n    height: '44px',\r\n    padding: '12px 12px 12px 40px',\r\n    width: '100%',\r\n  },\r\n})\r\n"],"sourceRoot":""}